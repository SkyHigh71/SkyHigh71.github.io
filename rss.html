<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
    <channel>
        <title>sakana</title>
        <link>http://skyhigh71.github.io/</link>
        <description>very short memo</description>
        <language>en-us</language>
        <pubDate>Tue, 08 Oct 2013 00:00:00 +0900</pubDate>
        
        <item>
            <link>http://skyhigh71.github.io/2013/10/08/resize_disk_size_of_guest_on_kvm.html</link>
            <guid>http://skyhigh71.github.io/2013/10/08/resize_disk_size_of_guest_on_kvm.html</guid>
            <title><![CDATA[resize disk size of guest on KVM]]></title>
            <description><![CDATA[<div class="section" id="resize-disk-size-of-guest-on-kvm">
<h1>resize disk size of guest on KVM</h1>
<p>Sometimes you regret that you created guest OS with too small disk space.
sigh...
And you would like to increase disk space a little.</p>
<p>You can do it with some steps and I hereby quote a sample procedure of such operation.
In this sample, OS of guest instance is Windows 7.</p>
<div class="section" id="shutdown">
<h2>shutdown</h2>
<p>Shutdown guest OS before start operation.</p>
</div>
<div class="section" id="resize-image-file">
<h2>resize image file</h2>
<p>Guest OS’s file system is represented in image file (*.img), which reflect its size.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>du -sh /var/lib/libvirt/images/win7.img
21G /var/lib/libvirt/images/win7.img
</pre></div>
</div>
<p>Let us manipulate image file by qemu-img command.
In this sample, 20GB will be added to existing file.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo qemu-img resize /var/lib/libvirt/images/win7.img +20G
Image resized.
</pre></div>
</div>
</div>
<div class="section" id="resize-partition">
<h2>resize partition</h2>
<p>Now you need to resize existing partition to grow as much as you increased.
For that sake, let us make use of <a class="reference external" href="http://gparted.sourceforge.net">gnome partition editor</a> (gparted).</p>
<p>Download ISO file of gparted and connect it to guest instance.
And boot from gparted.
You will select graphical user interface of gparted and increase partition size easily.</p>
</div>
<div class="section" id="boot">
<h2>boot</h2>
<p>Now you can boot with guest OS and see that disk size does increase.</p>
</div>
</div>]]></description>
             <pubDate>Tue, 08 Oct 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/10/06/plotting.html</link>
            <guid>http://skyhigh71.github.io/2013/10/06/plotting.html</guid>
            <title><![CDATA[plotting]]></title>
            <description><![CDATA[<div class="section" id="plotting">
<h1>plotting</h1>
<p>Sometimes you would like to create a plot out of some text file.
You can achieve it by making use of matplotlib.</p>
<p>I have to confess that I am not quite accustomed with matplotlib though, I hereby demonstrate a sample.</p>
<div class="section" id="installation">
<h2>installation</h2>
<p>Installation is quite simple and one line command suffices.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo apt-get install python-matplotlib
</pre></div>
</div>
</div>
<div class="section" id="sample">
<h2>sample</h2>
<p>Suppose such a CSV file as follows.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">201201</span><span class="p">,</span><span class="mi">1477</span><span class="p">,</span><span class="mi">994</span>
<span class="mi">201202</span><span class="p">,</span><span class="mi">1462</span><span class="p">,</span><span class="mi">988</span>
<span class="mi">201203</span><span class="p">,</span><span class="mi">1437</span><span class="p">,</span><span class="mi">985</span>
</pre></div>
</div>
<p>That is, CSV file contains residential loan prepayment history.
lines are consisted of,</p>
<ul class="simple">
<li>month of prepayment</li>
<li>monthly payment</li>
<li>bonus payment</li>
</ul>
</div>
<div class="section" id="plot">
<h2>plot</h2>
<p>You can plot a graph, for example, as follows.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">dates</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="n">raw_data</span> <span class="o">=</span> <span class="s">&quot;sample.csv&quot;</span>
    <span class="n">fmt</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;prepay&quot;</span><span class="p">,</span> <span class="s">&quot;month&quot;</span><span class="p">,</span> <span class="s">&quot;bonus&quot;</span><span class="p">]</span>

    <span class="c"># prepayment date</span>
    <span class="n">prepay</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c"># lists to store each values</span>
    <span class="n">monthCal</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">monthAct</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">year</span>     <span class="o">=</span> <span class="p">[]</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">raw_data</span><span class="p">,</span> <span class="s">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
            <span class="n">prepay</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">fmt</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&quot;prepay&quot;</span><span class="p">)],</span> <span class="s">&quot;%Y%m&quot;</span><span class="p">)))</span>
            <span class="n">monthCal</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">fmt</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&quot;month&quot;</span><span class="p">)])</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">fmt</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&quot;bonus&quot;</span><span class="p">)])</span><span class="o">/</span><span class="mi">6</span><span class="p">)</span> 
            <span class="n">monthAct</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">fmt</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&quot;month&quot;</span><span class="p">)]))</span>
            <span class="n">year</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">fmt</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&quot;month&quot;</span><span class="p">)])</span><span class="o">*</span><span class="mi">12</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">fmt</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s">&quot;bonus&quot;</span><span class="p">)])</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span> 

    <span class="c"># let's start plotting</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>

    <span class="c"># monthly graph</span>
    <span class="n">graph</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">graph</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">prepay</span><span class="p">,</span> <span class="n">monthCal</span><span class="p">,</span> <span class="s">&quot;bo&quot;</span><span class="p">,</span> <span class="n">prepay</span><span class="p">,</span> <span class="n">monthAct</span><span class="p">,</span> <span class="s">&quot;ro&quot;</span><span class="p">)</span>

    <span class="n">graph</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">dates</span><span class="o">.</span><span class="n">MonthLocator</span><span class="p">())</span>
    <span class="n">graph</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">dates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s">&quot;%Y/%m&quot;</span><span class="p">))</span>
    
    <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="s">&quot;vertical&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&quot;payment per month (USD)&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

    <span class="c"># yearly graph</span>
    <span class="n">graph</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">graph</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">prepay</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="s">&quot;go&quot;</span><span class="p">)</span>

    <span class="n">graph</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">dates</span><span class="o">.</span><span class="n">MonthLocator</span><span class="p">())</span>
    <span class="n">graph</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">dates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s">&quot;%Y/%m&quot;</span><span class="p">))</span>
    
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&quot;payment per year (USD)&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="s">&quot;vertical&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">raw_data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;csv&quot;</span><span class="p">,</span> <span class="s">&quot;png&quot;</span><span class="p">))</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="http://skyhigh71.github.io/_images/sample.png"><img alt="../../../_images/sample.png" src="http://skyhigh71.github.io/_images/sample.png" style="width: 650.4px; height: 354.8px;"/></a>
</div>
</div>]]></description>
             <pubDate>Sun, 06 Oct 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/10/05/back_up_files.html</link>
            <guid>http://skyhigh71.github.io/2013/10/05/back_up_files.html</guid>
            <title><![CDATA[back up files]]></title>
            <description><![CDATA[<div class="section" id="back-up-files">
<h1>back up files</h1>
<p>Here is another approach for creating back up files onto dropbox on regular basis by cron.
A quite simple script though, here are some remark.</p>
<div class="section" id="hostname">
<h2>hostname</h2>
<p>There are multiple approaches for obtaining hostname though, here I use socket.gethostname(), which seems to be a transliteration of gethostname() system call.</p>
</div>
<div class="section" id="compression">
<h2>compression</h2>
<p>Here I use bzip2 as compression algorithm, which seems to achieve more effective compression rate against files like plain text in comparison to other algorithm like gzip. But as a trade off to good compression rate, compression process seems to take longer time.</p>
</div>
<div class="section" id="temporary-file">
<h2>temporary file</h2>
<p>I create backup file first under temporary directory and then move it under directory under dropbox in case that there is/are any change(s). As creating backup file directly under dropbox directory is quite slow due to traffic.</p>
</div>
<div class="section" id="checksum">
<h2>checksum</h2>
<p>Finally I compare temporary backup file and existing file by value of MD5 checksum of each file. If they do not match, it indicates that some change(s) of file(s) may have arisen. If they are identical, then there was no change in files under target directory, so do nothing.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">os.path</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">tarfile</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="c"># base directory, which is one level upper than target directory</span>
    <span class="n">base</span>      <span class="o">=</span> <span class="s">&quot;&lt;BASE_DIRECTORY_OF_YOUR_CHOICE&gt;&quot;</span>
    <span class="c"># backup target directory under base directory</span>
    <span class="n">target</span>    <span class="o">=</span> <span class="s">&quot;&lt;BACK_UP_TARGET_DIRECTORY&gt;&quot;</span>
    <span class="c"># directories to exclude from backup file</span>
    <span class="n">exclude</span>   <span class="o">=</span> <span class="p">[</span><span class="s">&quot;&lt;DIRECTORY_TO_EXCLUDE&gt;&quot;</span><span class="p">]</span>

    <span class="c"># backup file name / HOSTNAME_DAY.tar.bz2</span>
    <span class="n">backup</span>    <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">gethostname</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;_&quot;</span> <span class="o">+</span>\
                <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&quot;%A&quot;</span><span class="p">)</span> <span class="o">+</span>\
                <span class="s">&quot;.tar.bz2&quot;</span>
    <span class="c"># temporary directory &amp; temporary file</span>
    <span class="n">temp_dir</span>  <span class="o">=</span> <span class="s">&quot;/tmp&quot;</span>
    <span class="n">temp_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">temp_dir</span><span class="p">,</span> <span class="n">backup</span><span class="p">)</span>
    <span class="c"># destination directory</span>
    <span class="n">dest_dir</span>  <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="s">&quot;Dropbox/&lt;TARGET_DIRECTORY&gt;&quot;</span><span class="p">)</span>
    <span class="n">dest_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dest_dir</span><span class="p">,</span> <span class="n">backup</span><span class="p">)</span>

    <span class="c"># let's start backup</span>

    <span class="c"># first create a backup file under temporary file</span>
    <span class="n">tar</span> <span class="o">=</span> <span class="n">tarfile</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">temp_file</span><span class="p">,</span> <span class="s">&quot;w:bz2&quot;</span><span class="p">)</span>

    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">target</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'/'</span><span class="p">):</span>  
                <span class="k">if</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tar</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
    
    <span class="n">tar</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="c"># backup file creation has finished</span>
    <span class="c"># now determine if file replacement is required or not</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">dest_file</span><span class="p">):</span>
        <span class="c"># dictionary to store md5 checksum of each file</span>
        <span class="n">md5</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">temp_file</span><span class="p">,</span> <span class="n">dest_file</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">as</span> <span class="n">file_to_check</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">file_to_check</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="n">md5</span><span class="p">[</span><span class="n">f</span><span class="p">]</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
        <span class="c"># compare checksum value of each file</span>
        <span class="c"># copy temporary file under destination directory</span>
        <span class="k">if</span> <span class="n">md5</span><span class="p">[</span><span class="n">temp_file</span><span class="p">]</span> <span class="o">!=</span> <span class="n">md5</span><span class="p">[</span><span class="n">dest_file</span><span class="p">]:</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">temp_file</span><span class="p">,</span> <span class="n">dest_dir</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c"># somehow backup of same name does not exist, do copy</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">temp_file</span><span class="p">,</span> <span class="n">dest_dir</span><span class="p">)</span>
</pre></div>
</div>
<p>If you would like to take backup, say, every one hour, then add such a line as follows in cron table.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>crontab -l
0 * * * * python &lt;PATH_TO_SCRIPT&gt;/backup.py
</pre></div>
</div>
</div>
</div>]]></description>
             <pubDate>Sat, 05 Oct 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/10/02/x86_or_x64.html</link>
            <guid>http://skyhigh71.github.io/2013/10/02/x86_or_x64.html</guid>
            <title><![CDATA[x86 or x64?]]></title>
            <description><![CDATA[<div class="section" id="x86-or-x64">
<h1>x86 or x64?</h1>
<p>I have to confess that I did not know CPU (AMD E2-1800) of my tiny PC (ThinkPad Edge E135) is x64 capable...</p>
<p>You can check whether your CPU is x64 capable or not by referencing existence of lm flag (long mode).</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>grep ^flags /proc/cpuinfo
flags               : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc extd_apicid aperfmperf pni monitor ssse3 cx16 popcnt lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch ibs skinit wdt arat hw_pstate npt lbrv svm_lock nrip_save pausefilter
</pre></div>
</div>
<p>If there is lm in flags line, then its CPU can be x86_64 architecture.
After reinstalling OS, now I have x64 OS at hand!</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>arch
x86_64
</pre></div>
</div>
<p>So easy...
Ok, let’s create an lxc instance on this re-born platform.</p>
<p>Timezone of instance seems to be in EDT, which is not convenient for us.
Let us change timezone to JST (Asia/tokyo).
You can do it by configuring /etc/localtime file to reference timezone data of Japan.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>file /usr/share/zoneinfo/Asia/Tokyo
/usr/share/zoneinfo/Asia/Tokyo: timezone data, version 2, 3 gmt <span class="nb">time </span>flags, 3 std <span class="nb">time </span>flags, no leap seconds, 9 transition <span class="nb">times</span>, 3 abbreviation chars

<span class="nv">$ </span>sudo ln -sf /usr/share/zoneinfo/Asia/Tokyo /etc/localtime
</pre></div>
</div>
</div>]]></description>
             <pubDate>Wed, 02 Oct 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/29/static_ip_address_assignment.html</link>
            <guid>http://skyhigh71.github.io/2013/09/29/static_ip_address_assignment.html</guid>
            <title><![CDATA[static IP address assignment]]></title>
            <description><![CDATA[<div class="section" id="static-ip-address-assignment">
<h1>static IP address assignment</h1>
<p>Let us configure network related properties of our DNS Server host.</p>
<div class="section" id="hostname">
<h2>hostname</h2>
<p>hostname of host can be configured by editing /etc/hostname file.</p>
</div>
<div class="section" id="static-ip-address">
<h2>static IP address</h2>
<p>By default, hosts are configured to obtain IP address from DHCP Server.
Configuration is stored in /etc/network/interfaces file.</p>
<div class="highlight-bash"><div class="highlight"><pre>auto eth0
iface eth0 inet dhcp
</pre></div>
</div>
<p>Replace above as follows so that IP address 10.0.3.10 is statically assigned for interface eth0.</p>
<div class="highlight-bash"><div class="highlight"><pre>auto eth0
iface eth0 inet static
address 10.0.3.10
network 10.0.3.0
netmask 255.255.255.0
broadcast 10.0.3.255
gateway 10.0.3.1
</pre></div>
</div>
</div>
<div class="section" id="resolver">
<h2>resolver</h2>
<p>As advertised in it, /etc/resolv.conf file will be overwritten upon system reboot.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)</span>
<span class="c">#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN</span>
</pre></div>
</div>
<p>You need to configure IP addresses of DNS servers and search domain in /etc/network/interfaces file as well.</p>
<div class="highlight-bash"><div class="highlight"><pre>dns-search example.org
dns-nameservers 10.0.3.10 10.0.3.1 8.8.8.8
</pre></div>
</div>
<p>Resolver will generates such lines as follows in /etc/resolv.conf.</p>
<div class="highlight-bash"><div class="highlight"><pre>nameserver 10.0.3.10
nameserver 10.0.3.1
nameserver 8.8.8.8
search example.org
</pre></div>
</div>
<p>Following <a class="reference external" href="http://askubuntu.com/questions/157154/how-do-i-include-lines-in-resolv-conf-that-wont-get-lost-on-reboot">entry</a> is a good reference.</p>
</div>
</div>]]></description>
             <pubDate>Sun, 29 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/29/change_ip_address_range.html</link>
            <guid>http://skyhigh71.github.io/2013/09/29/change_ip_address_range.html</guid>
            <title><![CDATA[change IP address range]]></title>
            <description><![CDATA[<div class="section" id="change-ip-address-range">
<h1>change IP address range</h1>
<p>As described in previous posts, we have some servers in lxc network now.</p>
<p>I would like that servers shall have static IP addresses.
Say, in the range from 10.0.3.2 until 10.0.3.99.</p>
<p>And client shall have dynamically assigned address, which should not conflict with server’s ones.
Let’s limit range of IP addresses, which DHCP Server, dnsmasq assigns for.</p>
<p>You can configure IP address range by modifying lxc file under /etc/default directory.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>diff lxc lxc.org
27,28c27,28
&lt; <span class="nv">LXC_DHCP_RANGE</span><span class="o">=</span><span class="s2">&quot;10.0.3.100,10.0.3.199&quot;</span>
&lt; <span class="nv">LXC_DHCP_MAX</span><span class="o">=</span><span class="s2">&quot;100&quot;</span>
---
&gt; <span class="nv">LXC_DHCP_RANGE</span><span class="o">=</span><span class="s2">&quot;10.0.3.2,10.0.3.254&quot;</span>
&gt; <span class="nv">LXC_DHCP_MAX</span><span class="o">=</span><span class="s2">&quot;253&quot;</span>
</pre></div>
</div>
<p>After restart, you will see that dnsmasq will set IP address range as follows:</p>
<div class="highlight-bash"><div class="highlight"><pre>dnsmasq -u lxc-dnsmasq --strict-order --bind-interfaces --pid-file<span class="o">=</span>/var/run/lxc/dnsmasq.pid --conf-file<span class="o">=</span> --listen-address 10.0.3.1 --dhcp-range 10.0.3.100,10.0.3.199 --dhcp-lease-max<span class="o">=</span>100 --dhcp-no-override --except-interface<span class="o">=</span>lo --interface<span class="o">=</span>lxcbr0 --dhcp-leasefile<span class="o">=</span>/var/lib/misc/dnsmasq.lxcbr0.leases --dhcp-authoritative
</pre></div>
</div>
</div>]]></description>
             <pubDate>Sun, 29 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/28/name_server.html</link>
            <guid>http://skyhigh71.github.io/2013/09/28/name_server.html</guid>
            <title><![CDATA[Name Server]]></title>
            <description><![CDATA[<div class="section" id="name-server">
<h1>Name Server</h1>
<p>Now let’s move on to Name Server.
Sometimes you would like to have your own name services to manipulate protocol like SMTP.</p>
<p>I hereby demonstrate procedure to set up BIND (version 9).
In this example, we use fictitious domain, example.org.</p>
<p>We disregard redundancy and focus on primary server.
That is, we omit secondary server :-).</p>
<p>By the way, following articles are good reference for you.</p>
<ul class="simple">
<li><a class="reference external" href="http://www.centos.org/docs/5/html/Deployment_Guide-en-US/ch-bind.html">Redhat Doc</a></li>
<li><a class="reference external" href="https://help.ubuntu.com/lts/serverguide/dns.html">Ubuntu Doc</a></li>
</ul>
<p>In this sample, we Ubuntu as platform.
And goal is to setup instance as follows.</p>
<p class="nwdiag">
<img alt="None" height="444" src="http://skyhigh71.github.io/_images/nwdiag-17483a1d749db81f98701368ac67bfcee9b9384d.png" width="608"/>
</p>
<div class="section" id="installation">
<h2>Installation</h2>
<p>Installation is quite simple.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo apt-get install bind9 dnsutils
</pre></div>
</div>
<p>That’s all.</p>
</div>
<div class="section" id="server-configurations">
<h2>Server Configurations</h2>
<p>Configuration files are stored under /etc/bind directory.
You will modify some file and add zone files for forward/reverse lookup.</p>
<div class="highlight-bash"><div class="highlight"><pre>├── bind.keys
├── db.0
├── db.127
├── db.255
├── db.empty
├── db.local
├── db.root
├── named.conf
├── named.conf.default-zones
├── named.conf.local
├── named.conf.options
├── rndc.key
└── zones.rfc1918
</pre></div>
</div>
</div>
<div class="section" id="forward-zone">
<h2>Forward Zone</h2>
<p>Append following lines into named.conf.local file so as to specify your domain name and its zone file.</p>
<div class="highlight-nginx"><div class="highlight"><pre><span class="k">zone</span> <span class="s">&quot;example.org&quot;</span> <span class="p">{</span>
        <span class="kn">type</span> <span class="s">master</span><span class="p">;</span>
    <span class="kn">file</span> <span class="s">&quot;/etc/bind/db.example.org&quot;</span><span class="p">;</span>
<span class="p">}</span>;
</pre></div>
</div>
<p>Create zone file, db.example.org, so as to describe host in the domain.</p>
<div class="highlight-bash"><div class="highlight"><pre>;
; BIND data file <span class="k">for </span>example.org
;
<span class="nv">$TTL</span>    604800
@       IN      SOA     example.org. root.example.org. <span class="o">(</span>
                       20130928         ; Serial
                         604800         ; Refresh
                          86400         ; Retry
                        2419200         ; Expire
                         604800 <span class="o">)</span>       ; Negative Cache TTL
        IN      A       10.0.3.10
;
@       IN      NS      dns.example.org.
@       IN      A       10.0.3.10
@       IN      AAAA    ::1
dns     IN      A       10.0.3.10
;MTA
        IN      MX 10   mta.example.org.
mta     IN      A       10.0.3.20
</pre></div>
</div>
</div>
<div class="section" id="reverse-zone">
<h2>Reverse Zone</h2>
<p>And now configure for reverse lookup.
Same as forward lookup, append following lines into named.conf.local.file.</p>
<div class="highlight-nginx"><div class="highlight"><pre><span class="k">zone</span> <span class="s">&quot;3.0.10.in-addr.arpa&quot;</span> <span class="p">{</span>
        <span class="kn">type</span> <span class="s">master</span><span class="p">;</span>
        <span class="kn">file</span> <span class="s">&quot;/etc/bind/db.10&quot;</span><span class="p">;</span>
<span class="p">}</span>;
</pre></div>
</div>
<p>And create a file named db.10 as follows.</p>
<div class="highlight-bash"><div class="highlight"><pre>;
; BIND reverse data file <span class="k">for </span>network 10.0.3.0
;
<span class="nv">$TTL</span>    604800
@       IN      SOA     example.org. root.example.org. <span class="o">(</span>
                       20130928         ; Serial
                         604800         ; Refresh
                          86400         ; Retry
                        2419200         ; Expire
                         604800 <span class="o">)</span>       ; Negative Cache TTL
;
@       IN      NS      dns.
10      IN      PTR     dns.example.org.
20      IN      PTR     mta.example.org.
</pre></div>
</div>
</div>
<div class="section" id="logging">
<h2>Logging</h2>
<p>Log message has been and will be your friend for debugging problem.
Append following lines to named.conf.local file.</p>
<div class="highlight-nginx"><div class="highlight"><pre><span class="k">logging</span> <span class="p">{</span>
    <span class="kn">channel</span> <span class="s">query.log</span> <span class="p">{</span>
        <span class="kn">file</span> <span class="s">&quot;/var/log/query.log&quot;</span><span class="p">;</span>
        <span class="kn">severity</span> <span class="s">debug</span> <span class="mi">3</span><span class="p">;</span>
    <span class="p">}</span>;
    <span class="kn">category</span> <span class="s">queries</span> <span class="p">{</span> <span class="kn">query.log</span><span class="p">;</span> <span class="p">}</span>;
<span class="p">}</span>;
</pre></div>
</div>
<p>And create a log file and change file owner to bind user.</p>
<div class="highlight-nginx"><div class="highlight"><pre><span class="k">$</span> <span class="s">sudo</span> <span class="s">touch</span> <span class="s">/var/log/query.log</span>
$ <span class="s">sudo</span> <span class="s">chown</span> <span class="s">bind</span> <span class="s">/var/log/query.log</span>
</pre></div>
</div>
<p>You will see log messages like this.</p>
<div class="highlight-bash"><div class="highlight"><pre>client 127.0.0.1#34060 <span class="o">(</span>mta.example.org<span class="o">)</span>: query: mta.example.org IN A +E <span class="o">(</span>127.0.0.1<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="start-service">
<h2>start service</h2>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo service bind9 restart
</pre></div>
</div>
</div>
</div>]]></description>
             <pubDate>Sat, 28 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/25/directory_server_in_lxc.html</link>
            <guid>http://skyhigh71.github.io/2013/09/25/directory_server_in_lxc.html</guid>
            <title><![CDATA[Directory Server]]></title>
            <description><![CDATA[<div class="section" id="directory-server">
<h1>Directory Server</h1>
<p>Sometimes you may (or may not) want to have a Directory Server at your hand for, say, storing your addresses.
Let us try if we can have Directory Server in virtual instance.</p>
<p>In this scenario, we use x86(i686) machine as host (not x64).</p>
<p>Download x86 version of Directory Server installer (V19710-01.zip) from OTN.
And deploy it onto target virtual machine.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>scp V19710-01.zip root@10.0.3.xxx:~/
</pre></div>
</div>
<p>As virtual machine have very limited number of tools, therefore you need to install basic commands like tar/unzip.
Following sample will install Directory Server under /home/dsee7 directory.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo yum install unzip tar
<span class="nv">$ </span>unzip V19710-01.zip
<span class="nv">$ </span>tar xfv DSEE.7.0.Linux-X86-zip.tar.gz
<span class="nv">$ </span>DSEE_ZIP_Distribution/
<span class="nv">$ </span>unzip -d /home sun-dsee7.zip
</pre></div>
</div>
<p>Ok, installation finished.
Now let’s move on to configuration.</p>
<p>Let’s create instance.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>./dsadm create /home/dsee7/instance
Choose the Directory Manager password:
Confirm the Directory Manager password:
Use <span class="s1">'dsadm start '</span>/home/dsee7/instance<span class="s1">''</span> to start the instance
</pre></div>
</div>
<p>Now you may encounter problem that instance start fails.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>./dsadm start ../instance/
ERROR&lt;4167&gt; - Startup  - <span class="nv">conn</span><span class="o">=</span>-1 <span class="nv">op</span><span class="o">=</span>-1 <span class="nv">msgId</span><span class="o">=</span>-1 - System error  Load library /home/dsee7/lib/pwdstorage-plugin.so: error /home/dsee7/lib/../lib/private/libfreebl3.so: version <span class="s1">'NSSRAWHASH_3.12.3'</span> not found <span class="o">(</span>required by /lib/libcrypt.so.1<span class="o">)</span>
</pre></div>
</div>
<p>libcrypt.so is dependent upon NSS.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ldd pwdstorage-plugin.so
./pwdstorage-plugin.so: /home/dsee7/lib/./../lib/private/libfreebl3.so: version <span class="s1">'NSSRAWHASH_3.12.3'</span> not found <span class="o">(</span>required by /lib/libcrypt.so.1<span class="o">)</span>
</pre></div>
</div>
<p>And libfreebl3.so seems not to have it.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>find / -name libfreebl3.so -ls
27270228  320 -rwxr-xr-x   1 root     root       325256 Aug  7 16:17 /lib/libfreebl3.so
27660408  364 -rwxr-xr-x   1 root     root       372385 Aug 27  2009 /home/dsee7/lib/private/libfreebl3.so
27791820    0 lrwxrwxrwx   1 root     root           23 Sep 22 20:03 /usr/lib/libfreebl3.so -&gt; ../../lib/libfreebl3.so
</pre></div>
</div>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>objdump -x /lib/libfreebl3.so |grep NSSRAWHASH_3.12.3
3 0x00 0x04ceacd3 NSSRAWHASH_3.12.3
<span class="nv">$ </span>objdump -x  /home/dsee7/lib/private/libfreebl3.so |grep NSSRAWHASH_3.12.3
<span class="nv">$ </span>
</pre></div>
</div>
<p>As temporary workaround, configure libfreebl3.so to reference one, which OS provides.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ls -l libfreebl3.so*
lrwxrwxrwx 1 root root     18 Sep 24 04:37 libfreebl3.so -&gt; /lib/libfreebl3.so
-rwxr-xr-x 1 root root 372385 Aug 27  2009 libfreebl3.so.org
</pre></div>
</div>
<p>Now you can start daemon.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>./dsadm start ../instance/
Directory Server instance <span class="s1">'/home/dsee7/instance'</span> started: <span class="nv">pid</span><span class="o">=</span>523
</pre></div>
</div>
<p>Let’s create a suffix to store entires.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>./dsconf create-suffix  <span class="s2">&quot;dc=lupin, dc=org&quot;</span>
</pre></div>
</div>
</div>]]></description>
             <pubDate>Wed, 25 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/23/centos_on_ubuntu.html</link>
            <guid>http://skyhigh71.github.io/2013/09/23/centos_on_ubuntu.html</guid>
            <title><![CDATA[CentOS on ubuntu]]></title>
            <description><![CDATA[<div class="section" id="centos-on-ubuntu">
<h1>CentOS on ubuntu</h1>
<p>Ok, let us create a RedHat clone instance, say, cent OS on ubuntu.
So as to manipulate RPM packages, you need to install curl and yum package.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo apt-get install curl yum
</pre></div>
</div>
<p>By default, there is no lxc template for Cent OS.
You need to deploy lxc template manually.
For example,</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo wget -O /usr/share/lxc/templates/lxc-centos https://gist.github.com/hagix9/3514296/raw/7f6bb4e291fad1dad59a49a5c02f78642bb99a45/lxc-centos
<span class="nv">$ </span>sudo chmod 755 /usr/share/lxc/templates/lxc-centos
</pre></div>
</div>
<p>You need some adjustment in case that architecture of you machine is i686.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>arch
i686
<span class="nv">$ </span>diff /usr/share/lxc/templates/lxc-centos /usr/share/lxc/templates/lxc-centos.org
170,171c170
&lt;         <span class="c">#RELEASE_URL=&quot;$MIRROR_URL/Packages/centos-release-$release-$releaseminor.el6.centos.10.$arch.rpm&quot;</span>
&lt;         <span class="nv">RELEASE_URL</span><span class="o">=</span><span class="s2">&quot;$MIRROR_URL/Packages/centos-release-$release-$releaseminor.el6.centos.10.i686.rpm&quot;</span>
---
&gt;         <span class="nv">RELEASE_URL</span><span class="o">=</span><span class="s2">&quot;$MIRROR_URL/Packages/centos-release-$release-$releaseminor.el6.centos.10.$arch.rpm&quot;</span>
</pre></div>
</div>
<p>Ok, now you are ready to start instance creation.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo lxc-create -t centos -n centos01
</pre></div>
</div>
<p>Please be noted that first time execution may take time, as this will download substantial amount of PRM packages.</p>
<p>After successful creation of instance, you can launch it and login via ssh.
By the way, default root password is password.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo lxc-start -n centos01 -d
<span class="nv">$ </span>ssh -l root <span class="sb">`</span>cut -d <span class="s2">&quot; &quot;</span> -f3 /var/lib/misc/dnsmasq.lxcbr0.leases<span class="sb">`</span>
</pre></div>
</div>
</div>]]></description>
             <pubDate>Mon, 23 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/22/lxc_cont.html</link>
            <guid>http://skyhigh71.github.io/2013/09/22/lxc_cont.html</guid>
            <title><![CDATA[lxc continued]]></title>
            <description><![CDATA[<div class="section" id="lxc-continued">
<h1>lxc continued</h1>
<p>Let us create virtual machine of your choice.
Suppose that you would like to create an instance of ubuntu.
(Please do not ask me reason why I need to run ubuntu on unbutu :-)).</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo lxc-create -t ubuntu -n ubuntu01
</pre></div>
</div>
<p>As this command execution will download files, therefore first time execution may take time.
So please wait for a while, say, by drinking coffee.</p>
<p>After successful execution, you will have an ubuntu instance named “ubuntu01”.</p>
<p>Ok, let us start lxc as daemon.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo lxc-start -n ubuntu01 -d
</pre></div>
</div>
<p>According to dhcp server (dnsmasq), 10.0.3.198 may have been leased.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>cat /var/lib/misc/dnsmasq.lxcbr0.leases
1379835957 00:16:3e:08:50:7f 10.0.3.198 ubuntu01 *
</pre></div>
</div>
<p>Let us login via ssh.
Default uid/password combination is ubuntu/ubuntu.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ssh -l ubuntu 10.0.3.198
</pre></div>
</div>
<p>Ok, network plan would be like this.</p>
<p class="nwdiag">
<img alt="None" height="444" src="http://skyhigh71.github.io/_images/nwdiag-7a9b63d8453e24f5c7d131a87aaf68d7ee723457.png" width="456"/>
</p>
</div>]]></description>
             <pubDate>Sun, 22 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/21/lxc_introduction.html</link>
            <guid>http://skyhigh71.github.io/2013/09/21/lxc_introduction.html</guid>
            <title><![CDATA[lxc introduction]]></title>
            <description><![CDATA[<div class="section" id="lxc-introduction">
<h1>lxc introduction</h1>
<p>You may be tempted (or may be not) to create lightweight virtual machine on you host.
lxc (LinuX Container) must be one of your options.</p>
<p>Installing lxc package will install all dependent packages.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo apt-get install lxc
</pre></div>
</div>
<p>virtual machine is manipulated by lxc- commands.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lxc-&lt;TAB&gt;&lt;TAB&gt;
lxc-aa-custom-profile  lxc-clone              lxc-execute            lxc-list               lxc-restart            lxc-unfreeze
lxc-attach             lxc-console            lxc-freeze             lxc-ls                 lxc-shutdown           lxc-unshare
lxc-cgroup             lxc-create             lxc-halt               lxc-monitor            lxc-start              lxc-version
lxc-checkconfig        lxc-destroy            lxc-info               lxc-netstat            lxc-start-ephemeral    lxc-wait
lxc-checkpoint         lxc-device             lxc-kill               lxc-ps                 lxc-stop
</pre></div>
</div>
<p>You will see lxc related configuration files under /etc/init directory.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ls /etc/init/lxc*
/etc/init/lxc-instance.conf  /etc/init/lxc-net.conf  /etc/init/lxc.conf
</pre></div>
</div>
<p>You will notice that new virtual interface is added and activated.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ifconfig lxcbr0
lxcbr0    Link encap:Ethernet  HWaddr a6:1a:10:32:67:87
          inet addr:10.0.3.1  Bcast:10.0.3.255  Mask:255.255.255.0
          inet6 addr: fe80::a41a:10ff:fe32:6787/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:84 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 <span class="o">(</span>0.0 B<span class="o">)</span>  TX bytes:13896 <span class="o">(</span>13.8 KB<span class="o">)</span>
</pre></div>
</div>
<p>And you will see that DHCP server is already running as well.</p>
<div class="highlight-bash"><div class="highlight"><pre>dnsmasq -u lxc-dnsmasq --strict-order --bind-interfaces --pid-file<span class="o">=</span>/var/run/lxc/dnsmasq.pid --conf-file<span class="o">=</span> --listen-address 10.0.3.1 --dhcp-range 10.0.3.2,10.0.3.254 --dhcp-lease-max<span class="o">=</span>253 --dhcp-no-override --except-interface<span class="o">=</span>lo --interface<span class="o">=</span>lxcbr0 --dhcp-leasefile<span class="o">=</span>/var/lib/misc/dnsmasq.lxcbr0.leases --dhcp-authoritative
</pre></div>
</div>
</div>]]></description>
             <pubDate>Sat, 21 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/21/library_details.html</link>
            <guid>http://skyhigh71.github.io/2013/09/21/library_details.html</guid>
            <title><![CDATA[library details]]></title>
            <description><![CDATA[<div class="section" id="library-details">
<h1>library details</h1>
<p>Sometime you feel like (or may not) checking details of certain library on you machine.
Suppose that the relevant library may be X related library.</p>
<p>Let us check and search for library name at first.
And apt-cache command is your friend.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>apt-cache search libx11
libx11-6 - X11 client-side library
libx11-6-dbg - X11 client-side library <span class="o">(</span>debug package<span class="o">)</span>
</pre></div>
</div>
<p>Ok, lib11-6 is what we are looking for.
Let us check its content.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>apt-cache show libx11-6
Package: libx11-6
Priority: standard
Section: libs
Installed-Size: 1489
Maintainer: Ubuntu Developers &lt;ubuntu-devel-discuss@lists.ubuntu.com&gt;
Original-Maintainer: Debian X Strike Force &lt;debian-x@lists.debian.org&gt;
Architecture: i386
Source: libx11
Version: 2:1.5.0-1ubuntu1.1
Depends: libc6 <span class="o">(</span>&gt;<span class="o">=</span> 2.15<span class="o">)</span>, libxcb1 <span class="o">(</span>&gt;<span class="o">=</span> 1.2<span class="o">)</span>, libx11-data
Pre-Depends: multiarch-support
Filename: pool/main/libx/libx11/libx11-6_1.5.0-1ubuntu1.1_i386.deb
Size: 776896
MD5sum: 3fea2137a989c9cf840c7e0db9b91606
SHA1: 5fcc7ab89b79687fb338e169622a2c57912bcb60
SHA256: 170ce1631c61458216078415ad9d660df98e193c18c4774d45432cb366e64c75
Description-en: X11 client-side library
 This package provides a client interface to the X Window System, otherwise
 known as <span class="s1">'Xlib'</span>.  It provides a <span class="nb">complete </span>API <span class="k">for </span>the basic functions of the
 window system.
 .
 More information about X.Org can be found at:
 &lt;URL:http://www.X.org&gt;
 .
 This module can be found at
 git://anongit.freedesktop.org/git/xorg/lib/libX11
Multi-Arch: same
Description-md5: d75c895abf6eca234f7480813aaa95ec
Bugs: https://bugs.launchpad.net/ubuntu/+filebug
Origin: Ubuntu
Supported: 9m
Task: standard, kubuntu-active, kubuntu-active, mythbuntu-frontend, mythbuntu-frontend, mythbuntu-desktop, mythbuntu-backend-slave, mythbuntu-backend-slave, mythbuntu-backend-master, mythbuntu-backend-master
</pre></div>
</div>
<p>You can download source as described.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ $ </span>git clone git://anongit.freedesktop.org/git/xorg/lib/libX11
</pre></div>
</div>
</div>]]></description>
             <pubDate>Sat, 21 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/19/network_diagram_in_document.html</link>
            <guid>http://skyhigh71.github.io/2013/09/19/network_diagram_in_document.html</guid>
            <title><![CDATA[network diagram in document]]></title>
            <description><![CDATA[<div class="section" id="network-diagram-in-document">
<h1>network diagram in document</h1>
<p>Sometimes you would like to draw network diagram and incorporate it into your document.</p>
<p>It’s so easy with sphinx and nwdiag.
For example, prepare such a text as follows and save it as, say, net.diag.</p>
<div class="highlight-bash"><div class="highlight"><pre>nwdiag <span class="o">{</span>
    internet <span class="o">[</span><span class="nv">shape</span> <span class="o">=</span> cloud<span class="o">]</span>;
    internet -- router;

    network eva<span class="o">{</span>
        <span class="nv">address</span> <span class="o">=</span> <span class="s2">&quot;192.168.10.0/24&quot;</span>;
        router;
        Nerv   <span class="o">[</span><span class="nv">address</span> <span class="o">=</span> <span class="s2">&quot;192.168.10.10&quot;</span><span class="o">]</span>;
        Seele  <span class="o">[</span><span class="nv">address</span> <span class="o">=</span> <span class="s2">&quot;192.168.10.11&quot;</span><span class="o">]</span>;
        Gehirn <span class="o">[</span><span class="nv">address</span> <span class="o">=</span> <span class="s2">&quot;192.168.10.12&quot;</span><span class="o">]</span>;
    <span class="o">}</span>

    network theLupin<span class="o">{</span>
        <span class="nv">address</span> <span class="o">=</span> <span class="s2">&quot;192.168.20.0/24&quot;</span>;
        router;
        lupin   <span class="o">[</span><span class="nv">address</span> <span class="o">=</span> <span class="s2">&quot;192.168.20.10&quot;</span><span class="o">]</span>;
        fujiko  <span class="o">[</span><span class="nv">address</span> <span class="o">=</span> <span class="s2">&quot;192.168.20.11&quot;</span><span class="o">]</span>;
        jigen   <span class="o">[</span><span class="nv">address</span> <span class="o">=</span> <span class="s2">&quot;192.168.20.12&quot;</span><span class="o">]</span>;
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>And merge this file into your sphinx document with as follows.</p>
<div class="highlight-bash"><div class="highlight"><pre>.. nwdiag:: net.diag
</pre></div>
</div>
<p>Then you will see beautiful network diagram as follows.</p>
<p class="nwdiag">
<img alt="None" height="732" src="http://skyhigh71.github.io/_images/nwdiag-0890d5ea2b61c0a45f5a2fad9ea442be2f1587e5.png" width="760"/>
</p>
</div>]]></description>
             <pubDate>Thu, 19 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/18/usb_devices.html</link>
            <guid>http://skyhigh71.github.io/2013/09/18/usb_devices.html</guid>
            <title><![CDATA[USB devices]]></title>
            <description><![CDATA[<div class="section" id="usb-devices">
<h1>USB devices</h1>
<p>Sometimes you would like to reference USB devices, which are attached to your machine.
You can make use of lsusb utility for this sake.</p>
<p>For example,</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lsusb
Bus 002 Device 003: ID 5986:0299 Acer, Inc
Bus 004 Device 002: ID 0a5c:21f4 Broadcom Corp.
Bus 006 Device 008: ID 0bb4:0ffe HTC <span class="o">(</span>High Tech Computer Corp.<span class="o">)</span> Desire HD <span class="o">(</span>modem mode<span class="o">)</span>
</pre></div>
</div>
<p>In case that you would like to check further details of specific USB device, for example, Desire, then you can specify use verbose option, -v.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo lsusb -v -s 008
</pre></div>
</div>
<p>By the way, lsusb command accesses file under /dev/bus/usb directory, which requires root permission.
Therefore if you execute command as user other than root without sudo, then you will see open failure.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">open</span><span class="p">(</span><span class="s">&quot;/dev/bus/usb/006/008&quot;</span><span class="p">,</span> <span class="n">O_RDWR</span><span class="p">)</span>    <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="n">EACCES</span> <span class="p">(</span><span class="n">Permission</span> <span class="n">denied</span><span class="p">)</span>
</pre></div>
</div>
</div>]]></description>
             <pubDate>Wed, 18 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/18/copying_files.html</link>
            <guid>http://skyhigh71.github.io/2013/09/18/copying_files.html</guid>
            <title><![CDATA[copy intermediate directories]]></title>
            <description><![CDATA[<div class="section" id="copy-intermediate-directories">
<h1>copy intermediate directories</h1>
<p>Sometimes you would like to cp files under directories, which does not exist on target directory. Current cp command does support this kind of operation.</p>
<p>Suppose that you have a file, which contains list of files with directory. You can copy files in it, for example, as follows.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>mkdir &lt;TARGER_DIR&gt;
<span class="nv">$ </span><span class="k">while </span><span class="nb">read </span>LINE
&gt; <span class="k">do</span>
&gt; cp -p --parents <span class="nv">$LINE</span> &lt;TAGET_DIR&gt;
&gt; <span class="k">done</span> &lt; &lt;INPUT_FILE&gt;
</pre></div>
</div>
<p>You will see that directory strctures are automatically created under target directory.</p>
<p>So easy...</p>
<p>Please refer to <a class="reference external" href="http://www.gnu.org/software/coreutils/manual/html_node/cp-invocation.html">gnu page</a> for details.</p>
</div>]]></description>
             <pubDate>Wed, 18 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/15/password_lock_of_screensaver.html</link>
            <guid>http://skyhigh71.github.io/2013/09/15/password_lock_of_screensaver.html</guid>
            <title><![CDATA[password lock of screensaver]]></title>
            <description><![CDATA[<div class="section" id="password-lock-of-screensaver">
<h1>password lock of screensaver</h1>
<p>By default, gnome-screen runs on ubuntu and password lock is enabled.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ps -ef|grep -i screen
lupin   2000     1  0 15:44 ?        00:00:00 /usr/bin/gnome-screensaver --no-daemon
</pre></div>
</div>
<p>Sometimes you may feel password lock troublesome and would like to disable it.
You can achieve it by gsettings command.</p>
<p>Current configuration can be checked,</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>gsettings get org.gnome.desktop.screensaver lock-enabled
<span class="nb">true</span>
</pre></div>
</div>
<p>You can disable password lock by setting lock-enabled value as false,</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>gsettings <span class="nb">set </span>org.gnome.desktop.screensaver lock-enabled <span class="nb">false</span>
</pre></div>
</div>
<p>Checking system calls done by this command, screensaver configuration seems to be stored in,</p>
<ul class="simple">
<li>/run/user/&lt;UID&gt;/dconf/user (may be for running process)</li>
<li>/&lt;HOME&gt;/.config/dconf/user (for permanent configuration)</li>
</ul>
<p>You can lock screen by “CTRL” + “ALT” + “L”.</p>
</div>]]></description>
             <pubDate>Sun, 15 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/13/source_code_reference.html</link>
            <guid>http://skyhigh71.github.io/2013/09/13/source_code_reference.html</guid>
            <title><![CDATA[source code reference]]></title>
            <description><![CDATA[<div class="section" id="source-code-reference">
<h1>source code reference</h1>
<p>Now we have clear precise stack.
Here is snippet of stack for relevant thread.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>gdb<span class="o">)</span> where
<span class="c">#0  0xb7705424 in __kernel_vsyscall ()</span>
<span class="c">#1  0xb7504b1f in __GI_raise (sig=sig@entry=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:56</span>
<span class="c">#2  0xb75080b3 in __GI_abort () at abort.c:90</span>
<span class="c">#3  0xb74fd877 in __assert_fail_base (fmt=0xb385fe90 &lt;Address 0xb385fe90 out of bounds&gt;, assertion=assertion@entry=0xb60f8419 &quot;ret != inval_id&quot;,</span>
    <span class="nv">file</span><span class="o">=</span>file@entry<span class="o">=</span>0xb60f838a <span class="s2">&quot;../../src/xcb_io.c&quot;</span>, <span class="nv">line</span><span class="o">=</span>line@entry<span class="o">=</span>529, <span class="k">function</span><span class="o">=</span><span class="k">function</span>@entry<span class="o">=</span>0xb60f849e &lt;__PRETTY_FUNCTION__.14075&gt; <span class="s2">&quot;_XAllocID&quot;</span><span class="o">)</span>
    at assert.c:92
<span class="c">#4  0xb74fd927 in __GI___assert_fail (assertion=assertion@entry=0xb60f8419 &quot;ret != inval_id&quot;, file=file@entry=0xb60f838a &quot;../../src/xcb_io.c&quot;,</span>
    <span class="nv">line</span><span class="o">=</span>line@entry<span class="o">=</span>529, <span class="k">function</span><span class="o">=</span><span class="k">function</span>@entry<span class="o">=</span>0xb60f849e &lt;__PRETTY_FUNCTION__.14075&gt; <span class="s2">&quot;_XAllocID&quot;</span><span class="o">)</span> at assert.c:101
<span class="c">#5  0xb608149f in _XAllocID (dpy=0xaf43e80) at ../../src/xcb_io.c:529</span>
</pre></div>
</div>
<p>As seen, some assertion may have failed and program aborted by itself.
Before applying debug information, which contains symbol table, frame 5 looked like this.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#5  0xb608149f in _XAllocID () from /usr/lib/i386-linux-gnu/libX11.so.6</span>
</pre></div>
</div>
<p>So let’s download source code of libX11 for reference.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>apt-get <span class="nb">source </span>libx11
</pre></div>
</div>
<p>It’s so easy...
Source files are downloaded under current working directory.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ls
libx11-1.5.0  libx11_1.5.0-1ubuntu1.1.diff.gz  libx11_1.5.0-1ubuntu1.1.dsc  libx11_1.5.0.orig.tar.gz
</pre></div>
</div>
<p>You can configure gdb to reference source code, for example, by “set substitute-path”.
But for this case ”../../src” does not work for me...</p>
<p>So quite primitive way though,</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd </span>libx11-1.5.0/
<span class="nv">$ </span>mkdir -p hoge/hoge
<span class="nv">$ </span><span class="nb">cd </span>hoge/hoge/
<span class="nv">$ </span>ls ../../src/xcb_io.c
../../src/xcb_io.c
<span class="nv">$ </span>gdb &lt;HOME&gt;/.dropbox-dist/dropbox /var/cores/core.dropbox.2147.*
</pre></div>
</div>
<p>Now you can see relevant section of code and variables.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>gdb<span class="o">)</span> frame 5
<span class="c">#5  0xb608149f in _XAllocID (dpy=0xaf43e80) at ../../src/xcb_io.c:529</span>
529         dpy-&gt;xcb-&gt;next_xid <span class="o">=</span> inval_id;
<span class="o">(</span>gdb<span class="o">)</span> list
524 /* _XAllocID - resource ID allocation routine. */
525 XID _XAllocID<span class="o">(</span>Display *dpy<span class="o">)</span>
526 <span class="o">{</span>
527         XID <span class="nv">ret</span> <span class="o">=</span> dpy-&gt;xcb-&gt;next_xid;
528         assert <span class="o">(</span>ret !<span class="o">=</span> inval_id<span class="o">)</span>;
529         dpy-&gt;xcb-&gt;next_xid <span class="o">=</span> inval_id;
530         _XSetPrivSyncFunction<span class="o">(</span>dpy<span class="o">)</span>;
531         <span class="k">return </span>ret;
532 <span class="o">}</span>
533
<span class="o">(</span>gdb<span class="o">)</span> print inval_id
<span class="nv">$1</span> <span class="o">=</span> 4294967295
<span class="o">(</span>gdb<span class="o">)</span> print dpy-&gt;xcb-&gt;next_xid
<span class="nv">$2</span> <span class="o">=</span> 4294967295
</pre></div>
</div>
</div>]]></description>
             <pubDate>Fri, 13 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/12/symbol_table.html</link>
            <guid>http://skyhigh71.github.io/2013/09/12/symbol_table.html</guid>
            <title><![CDATA[symbol table reference]]></title>
            <description><![CDATA[<div class="section" id="symbol-table-reference">
<h1>symbol table reference</h1>
<p>Now the time has come that we can debug core file.
In this case, dropbox seems to have yielded core file.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>file /var/cores/core.dropbox.2172.1378900464
/var/cores/core.dropbox.2172.1378900464: ELF 32-bit LSB core file Intel 80386, version 1 <span class="o">(</span>SYSV<span class="o">)</span>, SVR4-style, from <span class="s1">'&lt;HOME&gt;/.dropbox-dist/dropbox'</span>
</pre></div>
</div>
<p>But some dependent libraries (e.g. libc.so) are stripped and they do not have symbol table.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>file /lib/i386-linux-gnu/libc-2.17.so
/lib/i386-linux-gnu/libc-2.17.so: ELF 32-bit LSB shared object, Intel 80386, version 1 <span class="o">(</span>SYSV<span class="o">)</span>, dynamically linked <span class="o">(</span>uses shared libs<span class="o">)</span>, BuildID<span class="o">[</span>sha1<span class="o">]=</span>0x81a55e819c61f581e6a9179eaf59726dd80aea31, <span class="k">for </span>GNU/Linux 2.6.24, stripped
<span class="nv">$ </span>objdump -t /lib/i386-linux-gnu/libc-2.17.so

/lib/i386-linux-gnu/libc-2.17.so:     file format elf32-i386

SYMBOL TABLE:
no symbols
</pre></div>
</div>
<p>On linux we do not replace stripped library with non-stripped one.
Instead we install separate debug information file and configure debugger to reference it.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>apt-cache search libc-
libc6-dbg - Embedded GNU C Library: detached debugging symbols
<span class="nv">$ </span>sudo apt-get install libc6-dbg
</pre></div>
</div>
<p>Packages for debug information has suffix of -dbg (it seems to be so).
Installation will deploy files under /usr/lib/debug directory.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>file /usr/lib/debug/lib/i386-linux-gnu/libc-2.17.so
/usr/lib/debug/lib/i386-linux-gnu/libc-2.17.so: ELF 32-bit LSB shared object, Intel 80386, version 1 <span class="o">(</span>SYSV<span class="o">)</span>, dynamically linked <span class="o">(</span>uses shared libs<span class="o">)</span>, BuildID<span class="o">[</span>sha1<span class="o">]=</span>0x81a55e819c61f581e6a9179eaf59726dd80aea31, <span class="k">for </span>GNU/Linux 2.6.24, not stripped
<span class="nv">$ </span>objdump -t /usr/lib/debug/lib/i386-linux-gnu/libc-2.17.so

/usr/lib/debug/lib/i386-linux-gnu/libc-2.17.so:     file format elf32-i386

SYMBOL TABLE:
00000174 l    d  .note.gnu.build-id 00000000 .note.gnu.build-id
00000198 l    d  .note.ABI-tag      00000000 .note.ABI-tag
</pre></div>
</div>
<p>gdb is wise enough to automatically detect debug information (as long as libc6 and libc6-dbg match) and applies it!</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">(</span>gdb<span class="o">)</span> <span class="nb">set </span>verbose on
<span class="o">(</span>gdb<span class="o">)</span> run
...
Reading symbols from /lib/i386-linux-gnu/libc.so.6...Reading symbols from /usr/lib/debug/lib/i386-linux-gnu/libc-2.17.so...done.
<span class="k">done</span>.
</pre></div>
</div>
<p><a class="reference external" href="http://stackoverflow.com/questions/10000335/how-to-use-debug-version-of-libc">This entry</a> is quite of help for debug information.</p>
<p>Now we can see precise stack!</p>
</div>]]></description>
             <pubDate>Thu, 12 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/12/spell_check_in_vim.html</link>
            <guid>http://skyhigh71.github.io/2013/09/12/spell_check_in_vim.html</guid>
            <title><![CDATA[spell check in vim]]></title>
            <description><![CDATA[<div class="section" id="spell-check-in-vim">
<h1>spell check in vim</h1>
<p>If my memory does not deceive me, I started using vi as my editor on HP-UX 10.
(Yes, it is quite long time ago)
I have not noticed it until quite recently though, vim (vi improved) has evolved so much more than I had expected.</p>
<p>I write almost all of text on vim, which includes this blog post.
As seen, my vocabulary is quite limited and incorrect. And phrase does not go beyond routine.
That is, I need spell checking mechanism to correct many typo I make and suggestions to meet what I want to express.</p>
<div class="section" id="spell-check">
<h2>spell check</h2>
<p>vim provides spell checking mechanism and you can enable it by:</p>
<div class="highlight-vim"><div class="highlight"><pre><span class="p">:</span><span class="k">set</span> <span class="k">spell</span>
</pre></div>
</div>
<p>You will see color indicators, which tells you that there is typo.
You can list correct word candidates by setting cursor on the relevant word and</p>
<div class="highlight-vim"><div class="highlight"><pre>z<span class="p">=</span>
</pre></div>
</div>
<p>You will see list of words. Select appropriate one out of them.</p>
</div>
<div class="section" id="dictionary-extension">
<h2>dictionary extension</h2>
<p>You can add words, which are not listed in default dictionary into your own custom one.
Type zg(ood) on the relevant word.</p>
<div class="highlight-vim"><div class="highlight"><pre>zg
</pre></div>
</div>
<p>This operation simply adds that word into spellfile, e.g.) en.utf-8.add file under ~/.vim/spell directory.</p>
<div class="highlight-vim"><div class="highlight"><pre>$ <span class="k">cat</span> <span class="k">en</span>.utf<span class="m">-8</span>.add
<span class="k">vim</span>
</pre></div>
</div>
<p>If you would like to revert back, then type zw(rong).</p>
<div class="highlight-vim"><div class="highlight"><pre>zw
</pre></div>
</div>
<p>It seems that vim appends “/!” for that word in spell file.</p>
<div class="highlight-vim"><div class="highlight"><pre>$ <span class="k">cat</span> <span class="k">en</span>.utf<span class="m">-8</span>.add
<span class="k">vim</span>/<span class="p">!</span>
</pre></div>
</div>
<p>For details of spell checking, please refer to ”:help spell”.</p>
</div>
</div>]]></description>
             <pubDate>Thu, 12 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/10/how_to_notify_core_file_creation.html</link>
            <guid>http://skyhigh71.github.io/2013/09/10/how_to_notify_core_file_creation.html</guid>
            <title><![CDATA[how to notify core file creation]]></title>
            <description><![CDATA[<div class="section" id="how-to-notify-core-file-creation">
<h1>how to notify core file creation</h1>
<p>Now you are able to configure system to yield core files for designated directory.</p>
<p>But there is no way to notice creation of core file (as apport has been disabled).
Core files shall pile up silently behind the door.
Repetition of core dump can easily consume disk space.
You have to be careful and pay attention for such situation.</p>
<p>Let’s find out effective method to notify creation of core file.</p>
<div class="section" id="inotify">
<h2>inotify</h2>
<p>inotify?</p>
<p>inotify (inode notify) is a Linux kernel subsystem to notice changes on file system.
(quoted from wiki)
You can enjoy this functionality via inotify-tools package.</p>
<p>Installation is quite easy (as always).</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>apt-cache search inotify-tools
inotify-tools - <span class="nb">command</span>-line programs providing a simple interface to inotify
<span class="nv">$ </span>sudo apt-get install inotify-tools
<span class="nv">$ </span>inotifywa&lt;TAB&gt;
inotifywait   inotifywatch
</pre></div>
</div>
<p>You can make use of these tools to watch tagger directory and do some action(s).
For example,</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#!/usr/bin/env bash</span>

<span class="k">while </span>inotifywait -e create,modify /tmp; <span class="k">do</span>
<span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;Lupin, something happened under /tmp directory&quot;</span>
<span class="k">done</span>
</pre></div>
</div>
<p>Touching file “hi” under /tmp directory will yield.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>./watch.sh
Setting up watches.
Watches established.
/tmp/ CREATE hi
Lupin, something happened under /tmp directory
</pre></div>
</div>
<p>In the above sample, inotifywait monitors following events:</p>
<ul class="simple">
<li>CREATE</li>
<li>MODIFY</li>
</ul>
<p>You can monitor other events like OPEN/CLOSE/DELETE/ATTRIB.
And if you would like to configure inotify* to monitor directory recursively, then you can use -r option for that sake.</p>
<p>Fine.</p>
</div>
<div class="section" id="libnotify-bin">
<h2>libnotify-bin</h2>
<p>Now we have a method of detection.
Next item is means to notify you.</p>
<p>There is a tool called libnotify-bin, which sends message to notification daemon.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>apt-cache search libnotify-bin
libnotify-bin - sends desktop notifications to a notification daemon <span class="o">(</span>Utilities<span class="o">)</span>
<span class="nv">$ </span>apt-get install libnotify-bin
</pre></div>
</div>
<p>As far as I checked, libnotify-bin has already been installed by default.</p>
<p>Sending a message will give you pop-up message on desktop.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="k">for </span>i in <span class="sb">`</span>seq 10 -1 0<span class="sb">`</span>
&gt; <span class="k">do</span>
&gt; <span class="nb">echo</span> <span class="nv">$i</span>|festival --tts
&gt; <span class="k">done</span> <span class="o">&amp;&amp;</span> notify-send <span class="s1">'Ten Count! Knockout!'</span>
</pre></div>
</div>
<p>You win!</p>
</div>
<div class="section" id="automatic-start-upon-login">
<h2>automatic start upon login</h2>
<p>It may not be appropriate to put here though, let’s make use of /etc/profile.d directory for automatic start up upon login.</p>
<p>Prepare a script, which launches inotifywait under the name of, say, watchCore.sh.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#!/usr/bin/env bash</span>

<span class="k">while </span>inotifywait -e create /var/cores; <span class="k">do</span>
<span class="k">    </span>notify-send -u critical <span class="s2">&quot;a new core file is created. Please check /var/cores directory&quot;</span>
<span class="k">done</span>
</pre></div>
</div>
<p>Deploy another script under /etc/profile.d directory which launches former one.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#!/usr/bin/env bash</span>

nohup &lt;PATH&gt;/watchCore.sh 1&gt; /dev/null 2&gt;&amp;1 &amp;
</pre></div>
</div>
<p>Please do not forget to run script in background. :-)</p>
<p>Voila!</p>
</div>
</div>]]></description>
             <pubDate>Tue, 10 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/09/package_management_on_ubuntu.html</link>
            <guid>http://skyhigh71.github.io/2013/09/09/package_management_on_ubuntu.html</guid>
            <title><![CDATA[package management on ubuntu]]></title>
            <description><![CDATA[<div class="section" id="package-management-on-ubuntu">
<h1>package management on ubuntu</h1>
<p>Why did you choose ubuntu as your platform?
Every one must have reason(s) for that.</p>
<p>For me, one of main reasons is easy access of software packages.
(Remember the days of Solaris 8 when one had to install all the necessary packages manually by pkgadd...)</p>
<p>How are software packages repositories maintained on ubuntu?
Take google-chrome as example and see how it goes.</p>
<div class="section" id="apt-dpkg">
<h2>apt &amp; dpkg</h2>
<p>Ubuntu makes use of <strong>apt</strong> (Advanced Packaging Tool) for package maintenance.
apt resolves depency among packages and gives user a convenient way of package utilization.</p>
<p>And apt is dependent upon <strong>dpkg</strong>.
dpkg is a tool to manipulate deb format packages.</p>
</div>
<div class="section" id="setup-installation">
<h2>Setup &amp; Installation</h2>
<p>In case that you add some repository, you need to trust this repository by adding its public key.
Retrieve public key and add it into key repository.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | sudo apt-key add -
</pre></div>
</div>
<p>The relevant public key will be stored into /etc/apt/trusted.gpg file.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo apt-key list
/etc/apt/trusted.gpg
--------------------

pub   1024D/7FAC5991 2007-03-08
uid                  Google, Inc. Linux Package Signing Key &lt;linux-packages-keymaster@google.com&gt;
sub   2048g/C07CB649 2007-03-08
</pre></div>
</div>
<p>Then add google repository in source list.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo sh -c <span class="s1">'echo &quot;deb http://dl.google.com/linux/chrome/deb/ stable main&quot; &gt;&gt; /etc/apt/sources.list.d/google.list'</span>
</pre></div>
</div>
<p>Finally install google-chrome.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo apt-get update
<span class="nv">$ </span>sudo apt-get install google-chrome-stable
</pre></div>
</div>
</div>
<div class="section" id="summary">
<h2>Summary</h2>
<p>Software package related items are stored under /etc/apt directory.
In case that you add new software package, which are not listed in default repository, you need to add.</p>
<ul class="simple">
<li>public key (trusted.gpg)</li>
<li>package location (&lt;package&gt;.list)</li>
</ul>
</div>
</div>]]></description>
             <pubDate>Mon, 09 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/07/vmplayer_abnormal_exit_on_ubuntu.html</link>
            <guid>http://skyhigh71.github.io/2013/09/07/vmplayer_abnormal_exit_on_ubuntu.html</guid>
            <title><![CDATA[vmplayer abnormal exit on ubuntu]]></title>
            <description><![CDATA[<div class="section" id="vmplayer-abnormal-exit-on-ubuntu">
<h1>vmplayer abnormal exit on ubuntu</h1>
<p>These days on my ubuntu box I encounter abnormal exit of vmplayer upon start-up.
Specifically speaking vmplayer asks for me to update kernel modules and it fails.</p>
<p>sigh.</p>
<div class="section" id="problem-description">
<h2>problem description</h2>
<p>It goes as follows.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>vmplayer
Logging to /tmp/vmware-ayamada/vmware-modconfig-12999.log
... <span class="s2">&quot;VMWare Kernel Module Updater&quot;</span> windows comes up ...
<span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$?</span>
1
</pre></div>
</div>
<p>vmware-modconfig logs ends up here.</p>
<blockquote>
<div><div class="line-block">
<div class="line">Failed to find /lib/modules/3.8.0-30-generic/build/include/linux/version.h</div>
<div class="line">/lib/modules/3.8.0-30-generic/build/include/linux/version.h not found, looking for generated/uapi/linux/version.h instead.</div>
</div>
</div></blockquote>
<p>core file indicates that the process exited by receiving SEGV.</p>
<blockquote>
<div><div class="line-block">
<div class="line">Core was generated by /usr/lib/vmware/bin/vmware-gksu –su-mode –message=Please enter the root passw’.</div>
<div class="line">Program terminated with signal 11, Segmentation fault.</div>
<div class="line">#0  __strcmp_ssse3 () at ../sysdeps/i386/i686/multiarch/strcmp-ssse3.S:229</div>
</div>
</div></blockquote>
</div>
<div class="section" id="workaround">
<h2>workaround</h2>
<p>It seems to be known issue.
Please refer to <a class="reference external" href="http://askubuntu.com/questions/247547/vmware-player-5-0-1-and-kernel-3-7-will-not-complile">following thread</a> in askubuntu.</p>
<p>So workaround is to:</p>
<ol class="arabic simple">
<li>create symbolic link of version.h header for current kernel revision</li>
<li>compile</li>
</ol>
<p>Procedure is as follows.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>uname -r
3.8.0-30-generic
<span class="nv">$ </span>sudo ln -s /usr/src/linux-headers-<span class="sb">`</span>uname -r<span class="sb">`</span>/include/generated/uapi/linux/version.h /usr/src/linux-headers-<span class="sb">`</span>uname -r<span class="sb">`</span>/include/linux/version.h
<span class="nv">$ </span>sudo vmware-modconfig --console --install-all
</pre></div>
</div>
<p>Now you can enjoy vmplayer again.</p>
</div>
<div class="section" id="remark">
<h2>remark</h2>
<p>There are so many headers...</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ls -ld /usr/src/linux-headers-3.8.0-*-generic
drwxr-xr-x 7 root root 4096 May 18 14:34 /usr/src/linux-headers-3.8.0-21-generic
drwxr-xr-x 7 root root 4096 May 25 08:59 /usr/src/linux-headers-3.8.0-22-generic
drwxr-xr-x 7 root root 4096 May 31 09:59 /usr/src/linux-headers-3.8.0-23-generic
drwxr-xr-x 7 root root 4096 Jun 19 10:01 /usr/src/linux-headers-3.8.0-25-generic
drwxr-xr-x 7 root root 4096 Jul  5 09:58 /usr/src/linux-headers-3.8.0-26-generic
drwxr-xr-x 7 root root 4096 Jul 31 09:22 /usr/src/linux-headers-3.8.0-27-generic
drwxr-xr-x 7 root root 4096 Aug 21 10:07 /usr/src/linux-headers-3.8.0-29-generic
drwxr-xr-x 7 root root 4096 Sep  6 09:52 /usr/src/linux-headers-3.8.0-30-generic
</pre></div>
</div>
</div>
</div>]]></description>
             <pubDate>Sat, 07 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/06/python_tools_invocation.html</link>
            <guid>http://skyhigh71.github.io/2013/09/06/python_tools_invocation.html</guid>
            <title><![CDATA[python tools invocation]]></title>
            <description><![CDATA[<div class="section" id="python-tools-invocation">
<h1>python tools invocation</h1>
<p>There are many tools (e.g. yum/hg), which are written in python, on Linux platform.
For example, on my ubuntu 13.04 box there are 45 python scripts under /usr/local/bin directory.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>file /usr/local/bin/*|grep -ic python
45
</pre></div>
</div>
<p>So I should say that one can not live without them.</p>
<p>How are these python tools invoked?</p>
<p>Take tikerer as example.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>which tinker
/usr/local/bin/tinker
<span class="nv">$ </span>file /usr/local/bin/tinker
/usr/local/bin/tinker: Python script, ASCII text executable
</pre></div>
</div>
<p>So executing tinker command will hook python package.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#!/usr/bin/python</span>
<span class="c"># EASY-INSTALL-ENTRY-SCRIPT: 'Tinkerer==1.2.1','console_scripts','tinker'</span>
<span class="n">__requires__</span> <span class="o">=</span> <span class="s">'Tinkerer==1.2.1'</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pkg_resources</span> <span class="kn">import</span> <span class="n">load_entry_point</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span>
        <span class="n">load_entry_point</span><span class="p">(</span><span class="s">'Tinkerer==1.2.1'</span><span class="p">,</span> <span class="s">'console_scripts'</span><span class="p">,</span> <span class="s">'tinker'</span><span class="p">)()</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Where does this package come from?
Let’s search for its location with primitive way.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>strace -o test.txt -e open tinker -d <span class="s2">&quot;test&quot;</span>
<span class="nv">$ </span>grep tinker test.txt |grep -iv enoent
...
open<span class="o">(</span><span class="s2">&quot;/usr/local/lib/python2.7/dist-packages/tinkerer/__init__.py&quot;</span>, O_RDONLY|O_LARGEFILE<span class="o">)</span> <span class="o">=</span> 3
open<span class="o">(</span><span class="s2">&quot;/usr/local/lib/python2.7/dist-packages/tinkerer/__init__.pyc&quot;</span>, O_RDONLY|O_LARGEFILE<span class="o">)</span> <span class="o">=</span> 4
</pre></div>
</div>
<p>Ok, here is the location where relevant python package resides.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ls /usr/local/lib/python2.7/dist-packages/tinkerer
__init__.py   __templates  cmdline.pyc      draft.pyc  master.py   page.py   paths.py   post.py   static  utils.py   writer.py
__init__.pyc  cmdline.py   draft.py ext        master.pyc  page.pyc  paths.pyc  post.pyc  themes  utils.pyc  writer.pyc
</pre></div>
</div>
<p>So when one installs python package, say, with pip command, packages will be deployed under dist-packages directory.
And at the same time, a wrapper script will be deployed on search path so that it invokes relevant package by making use of pkg_resources.</p>
</div>]]></description>
             <pubDate>Fri, 06 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/04/compare_files_recursively.html</link>
            <guid>http://skyhigh71.github.io/2013/09/04/compare_files_recursively.html</guid>
            <title><![CDATA[compare files recursively]]></title>
            <description><![CDATA[<div class="section" id="compare-files-recursively">
<h1>compare files recursively</h1>
<p>I have to confess that I’m so ignorant...</p>
<p>You can compare all the files under 2 directories recursively by diff command with -r option.</p>
<p>For example,</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>diff -r &lt;DIR_A&gt; &lt;DIR_B&gt;
</pre></div>
</div>
<p>So easy.
sigh...</p>
</div>]]></description>
             <pubDate>Wed, 04 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/04/distribute_requests_by_url_on_apache.html</link>
            <guid>http://skyhigh71.github.io/2013/09/04/distribute_requests_by_url_on_apache.html</guid>
            <title><![CDATA[distribute requests by URL on apache]]></title>
            <description><![CDATA[<div class="section" id="distribute-requests-by-url-on-apache">
<h1>distribute requests by URL on apache</h1>
<div class="section" id="what-s-in-your-mind">
<h2>what’s in your mind?</h2>
<p>Suppose that you have contents built on sphinx.
And you have already deployed it on apache instance.</p>
<p>Suppose that you would like to deploy another content.
That is, you started blogging and would like to publish it on identical instance of apache.</p>
<p>You can configure apache instance so that it distributes content by given URL.</p>
</div>
<div class="section" id="let-s-get-started">
<h2>Let’s get started</h2>
<p>You can create symbolic link to target directory under documentation root directory though, it seems to be quite raw.
You can make use of “LocationMatch” directive.</p>
<p>Create configuration file, e.g. tinker.conf under /etc/httpd/conf.d directory so that httpd can evaluate request.</p>
<div class="highlight-apache"><div class="highlight"><pre><span class="nb">Alias</span> <span class="sx">/blog</span> &lt;TINKER_ROOT&gt;/blog/html/
<span class="nt">&lt;LocationMatch</span> <span class="s">&quot;/blog/.*&quot;</span><span class="nt">&gt;</span>
    <span class="nb">AuthType</span> Basic
    <span class="nb">AuthName</span> <span class="s2">&quot;Open Sesame!&quot;</span>
    <span class="nb">AuthUserFile</span> &lt;PATH_TO_PASS&gt;/htpasswd
    <span class="nb">Require</span> <span class="k">user</span> lupin
<span class="nt">&lt;/LocationMatch&gt;</span>
</pre></div>
</div>
<p>All request for &lt;SERVER&gt;/blog/* will be routed to contents under &lt;TINKER_ROOT&gt;/blog/html directory.
Replace &lt;TINKER_ROOT&gt; and &lt;PATH_TO_PASS&gt; as appropriate to meet your environment.</p>
<p>In this sample, we apply basic authentication for access to this content.
And user “lupin” can view content if authentication succeeds.</p>
<p>Create password file for lupin by htpasswd command.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>htpasswd -c htpasswd lupin
</pre></div>
</div>
<p>If you would like to allow access for other users, then add accounts to user list.
You can append user names by separating them with white space.</p>
<div class="highlight-apache"><div class="highlight"><pre><span class="nb">Require</span> <span class="k">user</span> lupin fujiko jigen
</pre></div>
</div>
<p>And restart httpd so as to reflect changes above.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo service httpd restart
</pre></div>
</div>
<p><strong>Enjoy!</strong></p>
</div>
</div>]]></description>
             <pubDate>Wed, 04 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/02/switching_from_https_to_ssh.html</link>
            <guid>http://skyhigh71.github.io/2013/09/02/switching_from_https_to_ssh.html</guid>
            <title><![CDATA[switching from HTTPS to SSH]]></title>
            <description><![CDATA[<div class="section" id="switching-from-https-to-ssh">
<h1>switching from HTTPS to SSH</h1>
<p>Communication protocol for github can either be SSH or HTTPS.
You can configure protocol to SSH so that ssh key shall be used for authentication.
And you do not have to enter password every time you communicate with github.</p>
<p>URL, which includes protocol, is specified in .git/config file.</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[remote &quot;origin&quot;]</span>
    <span class="na">url</span> <span class="o">=</span> <span class="s">https://github.com/&lt;USERNAME&gt;/&lt;REPO&gt;.git</span>
</pre></div>
</div>
<p>So as to change URL, use “git remote set-url” command.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git remote <span class="nb">set</span>-url origin git@github.com:&lt;USERNAME&gt;/&lt;REPO&gt;.git
</pre></div>
</div>
<p>URL in config file shall be updated as specified in argument abvoe.</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[remote &quot;origin&quot;]</span>
    <span class="na">url</span> <span class="o">=</span> <span class="s">git@github.com:&lt;USERNAME&gt;/&lt;REPO&gt;.git</span>
</pre></div>
</div>
<p>Therefore you may be able to configure URL directly by modifying value in config file (not tested though :-)).</p>
</div>]]></description>
             <pubDate>Mon, 02 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/01/google_anlytics_in_sphinx.html</link>
            <guid>http://skyhigh71.github.io/2013/09/01/google_anlytics_in_sphinx.html</guid>
            <title><![CDATA[google anlytics in sphinx]]></title>
            <description><![CDATA[<div class="section" id="google-anlytics-in-sphinx">
<h1>google anlytics in sphinx</h1>
<p>If you would like to analyze statics of access to your site built with sphinx, then you can embed google analytics code in it.</p>
<p>Prepare layout.html file under source/_templates directory.
Insert javascript code obtained at google analytics site.</p>
<div class="highlight-html"><div class="highlight"><pre>{% extends &quot;!layout.html&quot; %}

{% block footer %}
{{ super() }}
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;footer&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;script&gt;</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="nx">s</span><span class="p">,</span><span class="nx">o</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">r</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">m</span><span class="p">){</span>
    <span class="nx">i</span><span class="p">[</span><span class="s1">'GoogleAnalyticsObject'</span><span class="p">]</span><span class="o">=</span><span class="nx">r</span><span class="p">;</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">]</span><span class="o">=</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">]</span><span class="o">||</span><span class="kd">function</span><span class="p">(){</span>
        <span class="p">(</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">].</span><span class="nx">q</span><span class="o">=</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">].</span><span class="nx">q</span><span class="o">||</span><span class="p">[]).</span><span class="nx">push</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)</span>
    <span class="p">},</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">].</span><span class="nx">l</span><span class="o">=</span><span class="mi">1</span><span class="o">*</span><span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
    <span class="nx">a</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">o</span><span class="p">),</span><span class="nx">m</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">o</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
    <span class="nx">a</span><span class="p">.</span><span class="nx">async</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="nx">g</span><span class="p">;</span>
    <span class="nx">m</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">m</span><span class="p">)</span>
 <span class="p">})(</span><span class="nb">window</span><span class="p">,</span><span class="nb">document</span><span class="p">,</span><span class="s1">'script'</span><span class="p">,</span><span class="s1">'//www.google-analytics.com/analytics.js'</span><span class="p">,</span><span class="s1">'ga'</span><span class="p">);</span>
<span class="nx">ga</span><span class="p">(</span><span class="s1">'create'</span><span class="p">,</span> <span class="s1">'UA-xxxxxxxxx-x'</span><span class="p">,</span> <span class="s1">'&lt;site_name&gt;'</span><span class="p">);</span>
<span class="nx">ga</span><span class="p">(</span><span class="s1">'send'</span><span class="p">,</span> <span class="s1">'pageview'</span><span class="p">);</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/div&gt;</span>
{% endblock %}
</pre></div>
</div>
<p>And rebuild html and deploy it onto site.</p>
<p>For details, please refer to <a class="reference external" href="http://sphinx-doc.org/faq.html">sphinx FAQ</a>.</p>
</div>]]></description>
             <pubDate>Sun, 01 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/01/back_up_files_onto_dropbox.html</link>
            <guid>http://skyhigh71.github.io/2013/09/01/back_up_files_onto_dropbox.html</guid>
            <title><![CDATA[back up files onto dropbox]]></title>
            <description><![CDATA[<div class="section" id="back-up-files-onto-dropbox">
<h1>back up files onto dropbox</h1>
<p>All machine, which includes Hard Disks, are to break some day.
Let’s back up your precious content onto dropbox with encrypted on regular basis.</p>
<p>create backup directory in dropbox.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>mkdir ~/Dropbox/backup
</pre></div>
</div>
<p>Prepare backup script kicked by cron on regular interval.
Create directory where backup script resides:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>mkdir ~/Documents/cron
</pre></div>
</div>
<p>Deploy following <a class="reference download internal" href="http://skyhigh71.github.io/_downloads/backup.sh"><span class="xref download docutils literal"><span class="pre">backup</span> <span class="pre">script</span></span></a> under cron directory:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#!/usr/bin/env bash</span>

<span class="c"># we use day of week as file name</span>
<span class="nv">LANG</span><span class="o">=</span>C
<span class="nv">NAME</span><span class="o">=</span><span class="sb">`</span>date <span class="s2">&quot;+%A&quot;</span><span class="sb">`</span>
<span class="c"># please specify password for encryption in case that you encrypt backup file</span>
<span class="nv">PASSWD</span><span class="o">=</span>xxxxxx
<span class="c"># we create backup file under temporary directory on local host</span>
<span class="c"># so as to avoid latency</span>
<span class="nv">TEMP</span><span class="o">=</span>/tmp
<span class="nv">BACKUP_DIR</span><span class="o">=</span>~/Dropbox/backup

<span class="nb">cd</span> ~/Documents
<span class="k">if </span><span class="nb">true</span>
<span class="k">then</span>
<span class="k">    </span>find . -exec zip -P <span class="nv">$PASSWD</span> <span class="nv">$TEMP</span>/<span class="nv">$NAME</span>.zip <span class="o">{}</span> <span class="se">\;</span> 1&gt;/dev/null 2&gt;&amp;1
<span class="k">else</span>
<span class="k">    </span>find . -exec zip <span class="nv">$TEMP</span>/<span class="nv">$NAME</span>.zip <span class="o">{}</span> <span class="se">\;</span> 1&gt;/dev/null 2&gt;&amp;1
<span class="k">fi</span>
mv <span class="nv">$TEMP</span>/<span class="nv">$NAME</span>.zip <span class="nv">$BACKUP_DIR</span>
</pre></div>
</div>
<p>Please be noted that you have to add execution permission for this script.
And test it if it works or not.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>bash -xv backup.sh
</pre></div>
</div>
<p>Register cron job to start script on regular basis by “crontab -e”.
With following example, backup script is executed every one hour at *:00.</p>
<div class="highlight-bash"><div class="highlight"><pre>0 * * * * ~/Documents/cron/backup.sh
</pre></div>
</div>
<p>On ubuntu, cron activity is recorded in /var/log/syslog.
Monitor syslog if cron works as expected.</p>
</div>]]></description>
             <pubDate>Sun, 01 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/09/01/try_sphinx_better_theme.html</link>
            <guid>http://skyhigh71.github.io/2013/09/01/try_sphinx_better_theme.html</guid>
            <title><![CDATA[try sphinx better theme]]></title>
            <description><![CDATA[<div class="section" id="try-sphinx-better-theme">
<h1>try sphinx better theme</h1>
<p>Found a <a class="reference external" href="https://github.com/irskep/sphinx-better-theme">new theme</a> for sphinx.</p>
<p><a class="reference external" href="https://sphinx-better-theme.readthedocs.org/en/latest/demos.html">Demo site</a> looks nice &amp; simple.</p>
<p>Let’s apply and see what kind of effect will have on my documentation.</p>
<p>Application procedure is quite simple.
Install sphinx-better-theme package.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo pip install sphinx-better-theme
</pre></div>
</div>
<p>Apply theme by modifying conf.py.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">better</span> <span class="kn">import</span> <span class="n">better_theme_path</span>
<span class="n">html_theme_path</span> <span class="o">=</span> <span class="p">[</span><span class="n">better_theme_path</span><span class="p">]</span>
<span class="n">html_theme</span> <span class="o">=</span> <span class="s">'better'</span>
</pre></div>
</div>
<p>Ok, stay with this theme.</p>
</div>]]></description>
             <pubDate>Sun, 01 Sep 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/08/31/wiki_on_bitbucket.html</link>
            <guid>http://skyhigh71.github.io/2013/08/31/wiki_on_bitbucket.html</guid>
            <title><![CDATA[memo on bitbucket]]></title>
            <description><![CDATA[<div class="section" id="memo-on-bitbucket">
<h1>memo on bitbucket</h1>
<p>I would like to have place where I can put some static content created by sphinx.
I hereby demonstrate procedure to deploy html files onto bitbucket.</p>
<p>Create a repository under the name, &lt;username&gt;.bitbucket.org.
This repository could either be public or private. And you can select mercurial or git as your tool.
In this scenario, I use hg as my tool.</p>
<p>Create sphinx project to host your content.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>mkdir wiki <span class="o">&amp;&amp;</span> <span class="nb">cd </span>wiki
<span class="nv">$ </span>sphinx-quickstart
</pre></div>
</div>
<p>Write up your content and build it as usual.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>make html
</pre></div>
</div>
<p>Copy content from build/html directory.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>mkdir publish
<span class="nv">$ </span><span class="nb">cd </span>publish/
<span class="nv">$ </span>rsync -av ../build/html/ .
</pre></div>
</div>
<p>Now the content is ready for upload, so prepare for publication.</p>
<p>Install mercurial if you still do not have one at your hand.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo apt-get install python-dev
<span class="nv">$ </span>sudo pip install mercurial
<span class="nv">$ </span>which hg
/usr/local/bin/hg
</pre></div>
</div>
<p>OK, now we have hg.</p>
<p>Create .hgrc file under home directory.</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[ui]</span>
<span class="na">username</span> <span class="o">=</span> <span class="s">Fist LAST &lt;your_mail_address&gt;</span>
<span class="na">verbose</span> <span class="o">=</span> <span class="s">True</span>
</pre></div>
</div>
<p>Create ssh key for bitbucket.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ssh-keygen

~/.ssh<span class="nv">$ </span>ls id_rsa.bitbucket*
id_rsa.bitbucket  id_rsa.bitbucket.pub
</pre></div>
</div>
<p>Configure ~/.ssh/config file so that newly created ssh key be referenced for bitbucket access.</p>
<div class="highlight-menuconfig"><div class="highlight"><pre>Host bitbucket.org
    HostName        bitbucket.org
    IdentityFile    ~/.ssh/id_rsa.bitbucket.org
    User            hg
</pre></div>
</div>
<p>And deploy your public key onto bitbucket.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>xclip -sel clip &lt; id_rsa.bitbucket.pub
</pre></div>
</div>
<p>And place hgrc file under .hg directory of publish directory so that push target shall be specified.</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[paths]</span>
<span class="na">default</span><span class="o">=</span><span class="s">ssh://hg@bitbucket.org/&lt;userid&gt;/&lt;userid&gt;.bitbucket.org</span>
</pre></div>
</div>
<p>And push your content onto bitbucket.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>rsync -av ../build/html .
<span class="nv">$ </span>hg add .
<span class="nv">$ </span>hg commit -m <span class="s2">&quot;my first post of mine&quot;</span>
<span class="nv">$ </span>hg push
</pre></div>
</div>
<p>Now you can access your content by <a class="reference external" href="http:">http:/</a>/&lt;userid&gt;.bitbucket.org.</p>
</div>]]></description>
             <pubDate>Sat, 31 Aug 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/08/30/blockdiag_in_tinkerer.html</link>
            <guid>http://skyhigh71.github.io/2013/08/30/blockdiag_in_tinkerer.html</guid>
            <title><![CDATA[chart in blog post]]></title>
            <description><![CDATA[<div class="section" id="chart-in-blog-post">
<h1>chart in blog post</h1>
<p>Same as sphinx, you can make use of blockdiag as extension in tinkerer.
That is, you can draw chart in your blog by blockdiag.`</p>
<p>Here is a quick setup procedure.</p>
<p>First install sphinxcontrib-blockdiag package.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo pip install sphinxcontrib-blockdiag
</pre></div>
</div>
<p>Then add ‘sphinxcontrib.blockdiag’ in the list of extensions in conf.py.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span><span class="s">'tinkerer.ext.blog'</span><span class="p">,</span> <span class="s">'tinkerer.ext.disqus'</span><span class="p">,</span> <span class="s">'sphinxcontrib.blockdiag'</span><span class="p">]</span>
</pre></div>
</div>
<p>You can specify font of your choice used in blockdiag.
Search for path of your font.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">fc</span>-list
</pre></div>
</div>
<p>And specify font paht as value of blockdiag_fontpath.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">blockdiag_fontpath</span> <span class="o">=</span> <span class="s">'/usr/share/fonts/truetype/ttf-dejavu/DejaVuSansMono.ttf'</span>
</pre></div>
</div>
<p>Now it’s ready for usage.</p>
<p>For example,</p>
<p class="blockdiag">
<img alt="None" height="120" src="http://skyhigh71.github.io/_images/blockdiag-5e17e9707844be2c89d327c8de892f31f2754539.png" width="832"/>
</p>
</div>]]></description>
             <pubDate>Fri, 30 Aug 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/08/30/prevent_broken_pipe_during_ssh_session.html</link>
            <guid>http://skyhigh71.github.io/2013/08/30/prevent_broken_pipe_during_ssh_session.html</guid>
            <title><![CDATA[prevent broken pipe during ssh session]]></title>
            <description><![CDATA[<div class="section" id="prevent-broken-pipe-during-ssh-session">
<h1>prevent broken pipe during ssh session</h1>
<p>From time to time, you may encounter ssh session lost with following error.</p>
<div class="highlight-bash"><div class="highlight"><pre>Write failed: Broken pipe
</pre></div>
</div>
<p>It means that write() system call failed against File Descriptor for socket of ssh session.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>man -s2 write
...
EPIPE  fd is connected to a pipe or socket whose reading end is closed.  When this  happens  the  writing
       process  will  also  receive  a SIGPIPE signal.  <span class="o">(</span>Thus, the write <span class="k">return </span>value is seen only <span class="k">if </span>the
       program catches, blocks or ignores this signal.<span class="o">)</span>
</pre></div>
</div>
<p>You may be able to avoid this connection lost by keeping connection alive.</p>
<div class="section" id="client">
<h2>client</h2>
<p>You can configure ssh client to send request a response from sshd in the background.
You can set interval with unit in second (~/.ssh/config).</p>
<p>With following configuration sample, requests are sent every 2 minutes.</p>
<div class="highlight-bash"><div class="highlight"><pre>ServerAliveInterval 120
</pre></div>
</div>
<p>For details, please refer to “man ssh_config”.</p>
</div>
<div class="section" id="server">
<h2>server</h2>
<p>Same as client, sshd can be configured to send request on regular basis.
sshd configuraiton file is /etc/ssh/sshd_config.</p>
<div class="highlight-bash"><div class="highlight"><pre>ClientAliveInterval 120
</pre></div>
</div>
<p>For details, please refer to “man sshd_config”.</p>
</div>
</div>]]></description>
             <pubDate>Fri, 30 Aug 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/08/27/http_filter.html</link>
            <guid>http://skyhigh71.github.io/2013/08/27/http_filter.html</guid>
            <title><![CDATA[filter packet based upon URI]]></title>
            <description><![CDATA[<div class="section" id="filter-packet-based-upon-uri">
<h1>filter packet based upon URI</h1>
<p>Wireshark is your good friend.
You can find fun time of examining packets with wireshark.</p>
<p>Sometimes you would like to filter packets and extract packets only for specific URL, say, “www.google.com”. Wireshark provides content filter for HTTP as well.</p>
<p>Specify filter as follows.</p>
<div class="highlight-bash"><div class="highlight"><pre>http contains <span class="s2">&quot;www.google.com&quot;</span>
</pre></div>
</div>
<p><a class="reference external" href="http://www.wireshark.org/docs/man-pages/wireshark-filter.html">filter manual</a> will help you guide through details of filter configuration.</p>
</div>]]></description>
            <category><![CDATA[ wireshark ]]></category>
             <pubDate>Tue, 27 Aug 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/08/26/automatic_yum_update.html</link>
            <guid>http://skyhigh71.github.io/2013/08/26/automatic_yum_update.html</guid>
            <title><![CDATA[automatic yum update]]></title>
            <description><![CDATA[<div class="section" id="automatic-yum-update">
<h1>automatic yum update</h1>
<p>Sometime you would like to configure Scientific Linux to update packages automatically without manual intervention.
You can configure system as you wish and here is a short memo to achieve such.</p>
<div class="section" id="yum-cron">
<h2>yum-cron</h2>
<p>You can configure cron to start yum command on daily basis to check for update.
First install yum-cron command.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo yum install yum-cron
</pre></div>
</div>
<p>Installation will place 0yum.cron file under /etc/cron.daily directory.
And cron executes yum-cron on daily basis.</p>
<p>You can control yum-cron’s behavior by modifying configuration file, /etc/sysconfig/yum-cron.
I hereby quote some parameters in which you may be interested.</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="c1"># Don't install, just check (valid: yes|no)</span>
<span class="na">CHECK_ONLY</span><span class="o">=</span><span class="s">no</span>

<span class="c1"># Don't install, just check and download (valid: yes|no)</span>
<span class="na">DOWNLOAD_ONLY</span><span class="o">=</span><span class="s">no</span>
</pre></div>
</div>
<p>And start service for now.
And configure system to start yum-cron service upon restart.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>/etc/init.d/yum-cron start
<span class="nv">$ </span>sudo chkconfig yum-cron on
</pre></div>
</div>
</div>
<div class="section" id="history">
<h2>history</h2>
<p>You can check if cron has started or not by referencing /var/log/cron* logs.</p>
<div class="highlight-bash"><div class="highlight"><pre>Aug 26 03:16:01 &lt;hostname&gt; run-parts<span class="o">(</span>/etc/cron.daily<span class="o">)[</span>24221<span class="o">]</span>: starting 0yum.cron
Aug 26 04:07:46 &lt;hostname&gt; run-parts<span class="o">(</span>/etc/cron.daily<span class="o">)[</span>24421<span class="o">]</span>: finished 0yum.cron
</pre></div>
</div>
<p>Log message are yielded in /var/log/yum.log file</p>
<div class="highlight-bash"><div class="highlight"><pre>Aug 09 04:09:11 Updated: nss-softokn-devel-3.14.3-3.el6_4.i686
Aug 09 04:09:12 Updated: nss-devel-3.14.3-4.el6_4.i686
Aug 09 04:09:13 Updated: nss-tools-3.14.3-4.el6_4.i686
Aug 14 03:36:46 Updated: httpd-tools-2.2.15-29.sl6.i686
Aug 14 03:36:48 Updated: httpd-2.2.15-29.sl6.i686
</pre></div>
</div>
<p>as specified in yum’s configuration file, /etc/yum.conf.</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[main]</span>
<span class="na">debuglevel</span><span class="o">=</span><span class="s">2</span>
<span class="na">logfile</span><span class="o">=</span><span class="s">/var/log/yum.log</span>
</pre></div>
</div>
<p>Or you can check history by yum history command.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo yum <span class="nb">history</span>
Loaded plugins: auto-update-debuginfo, downloadonly, fastestmirror, refresh-packagekit, security
ID     | Login user               | Date and <span class="nb">time</span>    | Action<span class="o">(</span>s<span class="o">)</span>      | Altered
-------------------------------------------------------------------------------
   138 | root &lt;root&gt;              | 2013-08-14 03:36 | Update         |    2
   137 | root &lt;root&gt;              | 2013-08-09 04:09 | Update         |   12
...
</pre></div>
</div>
<p>And You can check more details of update with “yum history &lt;ID&gt;”.</p>
</div>
<div class="section" id="sigh">
<h2>sigh</h2>
<p>Ah...</p>
<p>By default, SL has similar functionality yum-autoupdate, which is enabled and executed on daily basis. So above configuration is duplicate and not necessary.</p>
<p>You can disable yum-autoupdate by configuring /etc/sysconfig/yum-autoupdate file.</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="na">ENABLED</span><span class="o">=</span><span class="s">&quot;false&quot;</span>
</pre></div>
</div>
</div>
</div>]]></description>
             <pubDate>Mon, 26 Aug 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/08/25/how_to_play_minecraft_on_ubuntu.html</link>
            <guid>http://skyhigh71.github.io/2013/08/25/how_to_play_minecraft_on_ubuntu.html</guid>
            <title><![CDATA[how to play minecraft on ubuntu]]></title>
            <description><![CDATA[<div class="section" id="how-to-play-minecraft-on-ubuntu">
<h1>how to play minecraft on ubuntu</h1>
<p>My daughter would like to play her favorite game, minecraft on her ubuntu box.
Here is a short memo to summarize procedure to setup environment to play minecraft on ubuntu.</p>
<div class="section" id="jvm">
<h2>JVM</h2>
<p>minecraft client is a jar file and you would better to have hotspot VM.
You can install hotpost VM as follows:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo add-apt-repository ppa:webupd8team/java
<span class="nv">$ </span>sudo apt-get update
<span class="nv">$ </span>sudo apt-get install oracle-java7-installer
</pre></div>
</div>
</div>
<div class="section" id="search-path">
<h2>search path</h2>
<p>As with default configuration shared object libjawt.so can not be found.
You have to configure environment variable LD_LIBRARY_PATH so that libjawt.so can be searched for.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$LD_LIBRARY_PATH</span>:/usr/lib/jvm/java-7-oracle/jre/lib/i386/
</pre></div>
</div>
</div>
<div class="section" id="key-input">
<h2>key input</h2>
<p>As ibus interrupts key input on minecraft and You can not input any word on minecraft.
You can avoid this problem by configuring following environment variable:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">XMODIFIERS</span><span class="o">=</span>@im<span class="o">=</span>none
</pre></div>
</div>
</div>
<div class="section" id="script">
<h2>script</h2>
<p>Here is sample script to launch minecraft.
If you would like to speak something upon start-up, please install TTS engine, festival.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#!/usr/bin/env bash</span>

<span class="nv">LANG</span><span class="o">=</span>C
<span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$LD_LIBRARY_PATH</span>:/usr/lib/jvm/java-7-oracle/jre/lib/i386/
<span class="nv">XMODIFIERS</span><span class="o">=</span>@im<span class="o">=</span>none
<span class="nb">export </span>LANG LD_LIBRARY_PATH XMODIFIERS

<span class="nv">MINE_HOME</span><span class="o">=</span>~/minecraft
<span class="nb">cd</span> <span class="nv">$MINE_HOME</span>

<span class="nv">START_MSG</span><span class="o">=</span><span class="s2">&quot;start minecraft&quot;</span>
<span class="nb">echo</span> <span class="nv">$START_MSG</span>|festival --tts

<span class="nv">LOG</span><span class="o">=</span>play.<span class="sb">`</span>date <span class="s2">&quot;+%Y%m%d&quot;</span><span class="sb">`</span>.log

<span class="nb">echo</span> <span class="s2">&quot;START: &quot;</span> <span class="sb">`</span>date<span class="sb">`</span> &gt;&gt; <span class="nv">$LOG</span>
java -Xmx1024M -Xms512M -cp minecraft.jar net.minecraft.LauncherFrame &gt;&gt; <span class="nv">$LOG</span> 2&gt;&amp;1
<span class="nb">echo</span> <span class="s2">&quot;FINISH: &quot;</span> <span class="sb">`</span>date<span class="sb">`</span> &gt;&gt; <span class="nv">$LOG</span>
</pre></div>
</div>
</div>
<div class="section" id="register-unity-panel">
<h2>register unity panel</h2>
<p>You can launch above script directly from unity panel.</p>
<ul class="simple">
<li>desktop file</li>
</ul>
<p>Create desktop configuration file (e.g. minecraft.desktop) so that unity can evaluate how to launch application.</p>
<div class="highlight-nginx"><div class="highlight"><pre><span class="k">[Desktop</span> <span class="s">Entry]</span>
<span class="s">Type=Application</span>
<span class="s">Terminal=false</span>
<span class="s">Name=minecraft</span>
<span class="s">Icon=/PATH_TO_ICON_DIR/minecraft.ico</span>
<span class="s">Exec=/PATH_TO_SCRIPT_DIR/minecraft.sh</span>
</pre></div>
</div>
<p>Put this desktop configuration file under /usr/share/applications directory.</p>
<ul class="simple">
<li>unity panel</li>
</ul>
<p>And drag &amp; drop this desktop configuration file onto unity panel.</p>
</div>
</div>]]></description>
             <pubDate>Sun, 25 Aug 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/08/25/add_favicon.html</link>
            <guid>http://skyhigh71.github.io/2013/08/25/add_favicon.html</guid>
            <title><![CDATA[add favicon]]></title>
            <description><![CDATA[<div class="section" id="add-favicon">
<h1>add favicon</h1>
<p>You can configure favicon for your blog.</p>
<p>Prepare your favorite icon and place it under _static directory.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>file _static/skyhigh71.ico
_static/skyhigh71.ico: MS Windows icon resource - 1 icon
</pre></div>
</div>
<p>And point newly deployed icon file in conf.py.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Change your favicon (new favicon goes in _static directory)</span>
<span class="n">html_favicon</span> <span class="o">=</span> <span class="s">'skyhigh71.ico'</span>
</pre></div>
</div>
</div>]]></description>
             <pubDate>Sun, 25 Aug 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/08/24/customize_tinkerer_page_continued.html</link>
            <guid>http://skyhigh71.github.io/2013/08/24/customize_tinkerer_page_continued.html</guid>
            <title><![CDATA[customize tinkerer page continued]]></title>
            <description><![CDATA[<div class="section" id="customize-tinkerer-page-continued">
<h1>customize tinkerer page continued</h1>
<div class="section" id="language">
<h2>language</h2>
<p>LANG environment variable of my shell is configured to ja_JP.UTF-8.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$LANG</span>
ja_JP.UTF-8
</pre></div>
</div>
<p>Therefore I first thought that I have to set LANG=C upon building html so as to obtain English output.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ LANG</span><span class="o">=</span>C tinker -b
</pre></div>
</div>
<p><em>But it’s confirmed that language parameter in conf.py is valid for “en” as well.</em>
<strong>value “en” does not work. You will encounter error stating that “loading translations [en]... locale not available” sorry...</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">language</span> <span class="o">=</span> <span class="s">&quot;en&quot;</span>
</pre></div>
</div>
<p>And if you would like to configure, say, German as default language of your blog, then configure it as “de”.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">language</span> <span class="o">=</span> <span class="s">&quot;de&quot;</span>
</pre></div>
</div>
<p>But localization is not perfect, for example, date seems to be yielded based upon LANG.
So you would better to set LANG upon building html.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ LANG</span><span class="o">=</span>de_DE.utf8 tinker -b
</pre></div>
</div>
</div>
<div class="section" id="theme">
<h2>theme</h2>
<p>You can select theme among following options and set theme in theme in conf.py.</p>
<ul class="simple">
<li>flat (default)</li>
<li>modern5</li>
<li>minimal5</li>
<li>responsive</li>
<li>dark</li>
</ul>
</div>
<div class="section" id="post-per-page">
<h2>post per page</h2>
<p>Sometimes you find that default post per page (10) seems to be too long.
You can configure post per page by posts_per_page parameter.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Number of blog posts per page</span>
<span class="n">posts_per_page</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</div>
</div>
</div>]]></description>
             <pubDate>Sat, 24 Aug 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/08/24/how_to_yield_core_file.html</link>
            <guid>http://skyhigh71.github.io/2013/08/24/how_to_yield_core_file.html</guid>
            <title><![CDATA[how to yield core file]]></title>
            <description><![CDATA[<div class="section" id="how-to-yield-core-file">
<h1>how to yield core file</h1>
<p>By default, gdb is given on ubuntu desktop, so you can enjoy debugging applications (if you like :-)).</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>which gdb
/usr/bin/gdb
<span class="nv">$ </span>gdb -v
GNU gdb <span class="o">(</span>GDB<span class="o">)</span> 7.5.91.20130417-cvs-ubuntu
</pre></div>
</div>
<p>But it seems that core file of application is not yielded (quite natural).
Here is a memo to describe procedure how to configure system to yield core file.</p>
<div class="section" id="ulimit">
<h2>ulimit</h2>
<p>Core file size is set to size zero.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">ulimit</span> -a
core file size          <span class="o">(</span>blocks, -c<span class="o">)</span> 0
</pre></div>
</div>
<p>You can change size to some value by ulimit command. If you would like to set permanently, then configure its value in /etc/security/limits.conf.</p>
<div class="highlight-bash"><div class="highlight"><pre>*               soft    core            unlimited
</pre></div>
</div>
<p>In this case, soft limit for default entry is set to unlimited.
For details, please refer to man page of limits.conf.</p>
</div>
<div class="section" id="core-file-pattern">
<h2>core file pattern</h2>
<p>By default, application failures will be reported back to developers via <a class="reference external" href="https://wiki.ubuntu.com/Apport">apport</a>.</p>
<p>application failure is passed to apport application via pipe as described in /proc/sys/kernel/core_pattern file.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>cat /proc/sys/kernel/core_pattern
<span class="se">\|</span>/usr/share/apport/apport %p %s %c
</pre></div>
</div>
<p>Therefore you change output location of core file by manipulating core_pattern file.
Following is the sample to configure core files will be yielded under /var/cores directory with file name of core.&lt;executable_name&gt;.&lt;PID&gt;.&lt;timestamp&gt;.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo mkdir /var/cores
<span class="nv">$ </span>sudo chmod a+w /var/cores
<span class="nv">$ </span>sudo bash -c <span class="s2">&quot;echo /var/cores/core.%e.%p.%t &gt; /proc/sys/kernel/core_pattern&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="permanent-change">
<h2>permanent change</h2>
<p>Above change will be lost upon system reboot.
So as to make change reflected over reboot, add following line in /etc/sysctl.conf.</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="na">kernel.core_pattern</span><span class="o">=</span><span class="s">/var/cores/core.%e.%p.%t</span>
</pre></div>
</div>
<p>Please be noted that apport will overwrite this kernel parameter as follows (/etc/init/apport.conf).</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">echo</span> <span class="s2">&quot;\|/usr/share/apport/apport %p %s %c&quot;</span> &gt; /proc/sys/kernel/core_pattern
</pre></div>
</div>
<p>This phenomenon seems to have already been discussed in <a class="reference external" href="https://bugs.launchpad.net/ubuntu/+source/apport/+bug/1080978">bug #1080978</a>.</p>
<p>As temporary measure to avoid this overwrite, let us disable apport for now (/etc/default/apport).</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="c1">#enabled=1</span>
<span class="na">enabled</span><span class="o">=</span><span class="s">0</span>
</pre></div>
</div>
</div>
<div class="section" id="summary">
<h2>summary</h2>
<p>Now you will see core files.
Enjoy your debugging life.</p>
<p>By the way, repetition of application failure will consume disk space.
Please be careful and monitor free disk space.</p>
</div>
</div>]]></description>
             <pubDate>Sat, 24 Aug 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/08/23/customize_tinker_page.html</link>
            <guid>http://skyhigh71.github.io/2013/08/23/customize_tinker_page.html</guid>
            <title><![CDATA[customize tinkerer page]]></title>
            <description><![CDATA[<div class="section" id="customize-tinkerer-page">
<h1>customize tinkerer page</h1>
<div class="section" id="sidebar-items">
<h2>sidebar items</h2>
<p>You can customize items in sidebar (right side of this page) by modifying values in dictionary, html_sidebars.</p>
<p>For example, if you would like to show tags, then add “tags.html” as follows.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Add templates to be rendered in sidebar here</span>
<span class="n">html_sidebars</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;**&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;recent.html&quot;</span><span class="p">,</span> <span class="s">&quot;searchbox.html&quot;</span><span class="p">,</span> <span class="s">&quot;tags.html&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><a class="reference external" href="http://tinkerer.me/doc/more_tinkering.html">tinkerer documentation</a> will help you configure customization.</p>
</div>
<div class="section" id="tweet-button">
<h2>tweet button</h2>
<p>You can add tweet button on each post.
Here is sample code needed to be added in page.html file under _templates directory.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="c">&lt;!-- Twitter button --&gt;</span>
<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;https://twitter.com/share&quot;</span> <span class="na">class=</span><span class="s">&quot;twitter-share-button&quot;</span><span class="nt">&gt;</span>Tweet<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;script&gt;</span><span class="o">!</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">s</span><span class="p">,</span><span class="nx">id</span><span class="p">){</span><span class="kd">var</span> <span class="nx">js</span><span class="p">,</span><span class="nx">fjs</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">s</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span><span class="nx">p</span><span class="o">=</span><span class="sr">/^http:/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">location</span><span class="p">)</span><span class="o">?</span><span class="s1">'http'</span><span class="o">:</span><span class="s1">'https'</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">d</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">)){</span><span class="nx">js</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span><span class="nx">js</span><span class="p">.</span><span class="nx">id</span><span class="o">=</span><span class="nx">id</span><span class="p">;</span><span class="nx">js</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="nx">p</span><span class="o">+</span><span class="s1">'://platform.twitter.com/widgets.js'</span><span class="p">;</span><span class="nx">fjs</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">js</span><span class="p">,</span><span class="nx">fjs</span><span class="p">);}}(</span><span class="nb">document</span><span class="p">,</span> <span class="s1">'script'</span><span class="p">,</span> <span class="s1">'twitter-wjs'</span><span class="p">);</span><span class="nt">&lt;/script&gt;</span>
</pre></div>
</div>
<p>This code can be created mannualy by referencing <a class="reference external" href="https://twitter.com/about/resources/buttons">twitter site</a>.</p>
</div>
<div class="section" id="google-analytics">
<h2>google analytics</h2>
<p>You can take statistics of your blog by google analytics.
oN google analytics site create Tracking ID for your blog site, which yields javascript like this.</p>
<p>Please be noted that <strong>you have to exclude &lt;script&gt; tags</strong>.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="nx">s</span><span class="p">,</span><span class="nx">o</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">r</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">m</span><span class="p">){</span>
    <span class="nx">i</span><span class="p">[</span><span class="s1">'GoogleAnalyticsObject'</span><span class="p">]</span><span class="o">=</span><span class="nx">r</span><span class="p">;</span>
    <span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">]</span><span class="o">=</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">]</span><span class="o">||</span><span class="kd">function</span><span class="p">(){</span>
        <span class="p">(</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">].</span><span class="nx">q</span><span class="o">=</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">].</span><span class="nx">q</span><span class="o">||</span><span class="p">[]).</span><span class="nx">push</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)</span>
    <span class="p">},</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">].</span><span class="nx">l</span><span class="o">=</span><span class="mi">1</span><span class="o">*</span><span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
    <span class="nx">a</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">o</span><span class="p">),</span><span class="nx">m</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">o</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
    <span class="nx">a</span><span class="p">.</span><span class="nx">async</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
    <span class="nx">a</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="nx">g</span><span class="p">;</span>
    <span class="nx">m</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">m</span><span class="p">)</span>
<span class="p">})(</span><span class="nb">window</span><span class="p">,</span><span class="nb">document</span><span class="p">,</span><span class="s1">'script'</span><span class="p">,</span><span class="s1">'//www.google-analytics.com/analytics.js'</span><span class="p">,</span><span class="s1">'ga'</span><span class="p">);</span>

<span class="nx">ga</span><span class="p">(</span><span class="s1">'create'</span><span class="p">,</span> <span class="s1">'UA-xxxxxxxx-1'</span><span class="p">,</span> <span class="s1">'&lt;your_site&gt;'</span><span class="p">);</span>
<span class="nx">ga</span><span class="p">(</span><span class="s1">'send'</span><span class="p">,</span> <span class="s1">'pageview'</span><span class="p">);</span>
</pre></div>
</div>
<p>Save this code as google_analytics.js under _static directory.</p>
<p>And add following lines into page.html so as to incorporate this javascript.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span><span class="o">%</span> <span class="kr">extends</span> <span class="s2">&quot;!page.html&quot;</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{</span><span class="o">%</span> <span class="nx">set</span> <span class="nx">script_files</span> <span class="o">=</span> <span class="nx">script_files</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;_static/google_analytics.js&quot;</span><span class="p">]</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>With above configurations applied, you will see page.html as follows.</p>
<div class="highlight-html"><div class="highlight"><pre>{% extends &quot;!page.html&quot; %}

{% set script_files = script_files + [&quot;_static/google_analytics.js&quot;] %}

{%- block body %}
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;section_head&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;timestamp_layout&quot;</span><span class="nt">&gt;</span>
      {{ timestamp(metadata.formatted_date) }}
    <span class="nt">&lt;/div&gt;</span>
    {% block buttons %}
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;buttons&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- Twitter button --&gt;</span>
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;https://twitter.com/share&quot;</span> <span class="na">class=</span><span class="s">&quot;twitter-share-button&quot;</span><span class="nt">&gt;</span>Tweet<span class="nt">&lt;/a&gt;</span>
      <span class="nt">&lt;script&gt;</span><span class="o">!</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">s</span><span class="p">,</span><span class="nx">id</span><span class="p">){</span><span class="kd">var</span> <span class="nx">js</span><span class="p">,</span><span class="nx">fjs</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">s</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span><span class="nx">p</span><span class="o">=</span><span class="sr">/^http:/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">location</span><span class="p">)</span><span class="o">?</span><span class="s1">'http'</span><span class="o">:</span><span class="s1">'https'</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">d</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">)){</span><span class="nx">js</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span><span class="nx">js</span><span class="p">.</span><span class="nx">id</span><span class="o">=</span><span class="nx">id</span><span class="p">;</span><span class="nx">js</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="nx">p</span><span class="o">+</span><span class="s1">'://platform.twitter.com/widgets.js'</span><span class="p">;</span><span class="nx">fjs</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">js</span><span class="p">,</span><span class="nx">fjs</span><span class="p">);}}(</span><span class="nb">document</span><span class="p">,</span> <span class="s1">'script'</span><span class="p">,</span> <span class="s1">'twitter-wjs'</span><span class="p">);</span><span class="nt">&lt;/script&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    {% endblock %}
    <span class="nt">&lt;/div&gt;</span>
    {{ link }}
    {{ body }}
    {{ post_meta(metadata) }}
    {{ comments }}
{% endblock %}
</pre></div>
</div>
</div>
</div>]]></description>
             <pubDate>Fri, 23 Aug 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/08/22/enable_sshd.html</link>
            <guid>http://skyhigh71.github.io/2013/08/22/enable_sshd.html</guid>
            <title><![CDATA[enable sshd]]></title>
            <description><![CDATA[<div class="section" id="enable-sshd">
<h1>enable sshd</h1>
<p>By default, sshd is disabled on ubuntu desktop.
Therefore you need to install &amp; enable sshd if you would like to access host remotely via ssh.</p>
<p>Here is short memo for this sake.</p>
<p>First, search for sshd package via apt-cache command.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo apt-cache search sshd
openssh-server - secure shell <span class="o">(</span>SSH<span class="o">)</span> server, <span class="k">for </span>secure access from remote machines

<span class="nv">$ </span>sudo apt-cache show openssh-server
Package: openssh-server
...
Description-en: secure shell <span class="o">(</span>SSH<span class="o">)</span> server, <span class="k">for </span>secure access from remote machines
...
This package provides the sshd server.
</pre></div>
</div>
<p>OK, openssh-server seems to be what we are looking for.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo apt-get install openssh-server
</pre></div>
</div>
<p>Installation will automatically start sshd daemon.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo lsof -nPi:22
COMMAND  PID    USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
sshd    3557    root    3u  IPv4  35564      0t0  TCP *:22 <span class="o">(</span>LISTEN<span class="o">)</span>
sshd    3557    root    4u  IPv6  35566      0t0  TCP *:22 <span class="o">(</span>LISTEN<span class="o">)</span>

<span class="nv">$ </span>sudo service ssh status
ssh start/running, process 3557
</pre></div>
</div>
<p>Please be noted, sshd daemon is registered not as sshd but as ssh.</p>
<p>sshd configuration can be set in /etc/ssh/sshd_config.
In case that you would like to disable remote root access, then change parameter PermitRootLogin value from yes to no.</p>
<div class="highlight-bash"><div class="highlight"><pre>PermitRootLogin no
</pre></div>
</div>
</div>]]></description>
             <pubDate>Thu, 22 Aug 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/08/21/swap_caps_lock_with_ctrl.html</link>
            <guid>http://skyhigh71.github.io/2013/08/21/swap_caps_lock_with_ctrl.html</guid>
            <title><![CDATA[swap Caps Lock key with Ctrl key]]></title>
            <description><![CDATA[<div class="section" id="swap-caps-lock-key-with-ctrl-key">
<h1>swap Caps Lock key with Ctrl key</h1>
<p>I have been using Happy Hacking Keyboard (HHK) for about decade.
It’s really nice one, but it becomes lame at last and key touch is quite noisy.
So I bought a cheap English layout keyboard at amazon. (good-by HHK)</p>
<p>The problem here is that “caps lock” resides in the left-middle. <strong>This is quite inconvenient.</strong>
So I replaced “caps lock” key with “control” by configuring keyboard mapping.</p>
<p>Here is its procedure on ubuntu 13.04 (LXDE) to do so.</p>
<p>Edit keyboard file and applying argument “ctrl:swapcaps” for XKBOPTIONS option.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> /etc/default
<span class="nv">$ </span>diff keyboard keyboard.org
11,12c11
&lt; <span class="c">#XKBOPTIONS=&quot;&quot;</span>
&lt; <span class="nv">XKBOPTIONS</span><span class="o">=</span><span class="s2">&quot;ctrl:swapcaps&quot;</span>
---
&gt; <span class="nv">XKBOPTIONS</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</pre></div>
</div>
<p>Or you can specify “ctrl:nocaps” in case that you assign control key for both.</p>
<p>Then execute dpkg-reconfigure command so that above change will take effect.
Please be noted that rebooting system has no effect for this keyboard configuration change and it remains as they were.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo dpkg-reconfigure keyboard-configuration
</pre></div>
</div>
<p>Answer to questions given by command and at last stage you will be prompted if you save above configuration change.</p>
<p>Following <a class="reference external" href="http://www.emacswiki.org/emacs/MovingTheCtrlKey">emacs page</a> has quite comprehensive explanation for this sake, which helps must help you.</p>
<p>And following <a class="reference external" href="https://wiki.debian.org/Keyboard">debian page</a> has explanation as to keyboard configuration.</p>
<p>Please be noted, above dpkg-reconfigure command updates initrd.img-X.X.X-XX-generic file under /boot directory. Therefore in case that OS updates image file, then you have to re-execute dpkg-reconfigure command to reflect change onto image file.</p>
<p><strong>Please be noted that there seems to be more work to be done, as change of configuration is lost after rebooting system. sorry...</strong></p>
<p>It seems that following <a class="reference external" href="http://ubuntuforums.org/showthread.php?t=1793250">thread</a> shall be similar issue of this.</p>
</div>]]></description>
             <pubDate>Wed, 21 Aug 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/08/11/the_first_post_of_mine.html</link>
            <guid>http://skyhigh71.github.io/2013/08/11/the_first_post_of_mine.html</guid>
            <title><![CDATA[the first post of mine]]></title>
            <description><![CDATA[<div class="section" id="the-first-post-of-mine">
<h1>the first post of mine</h1>
<p>A short memo to describe procedure how to host blog on github.</p>
<div class="section" id="github-configuration">
<h2>github configuration</h2>
<p>Let’s create public key and private key.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ssh-keygen
Generating public/private rsa key pair.
...
</pre></div>
</div>
<p>They are yielded under ~/.ssh directory or under current working directory in case that you do not specify its path.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>file *
id_rsa.github:     PEM RSA private key
id_rsa.github.pub: OpenSSH RSA public key
</pre></div>
</div>
<p>Configure ssh so that newly created private key will be applied for access against github.</p>
<div class="highlight-bash"><div class="highlight"><pre>~/.ssh<span class="nv">$ </span>more config
Host github.com
    HostName      github.com
    IdentityFile  ~/.ssh/id_rsa.github
    User          git
</pre></div>
</div>
<p>Deploy public key on github.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>xclip -sel clip &lt; ~/.ssh/id_rsa.github.pub
</pre></div>
</div>
<p>Now let’s make a test connection to github.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ssh -v -T git@github.com
</pre></div>
</div>
<p>Let’s install git command.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo apt-get install git
</pre></div>
</div>
<p>Configure user name and e-mail address for github,</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git config --global user.name &lt;USERNAME&gt;
<span class="nv">$ </span>git config --global user.email &lt;YOUR_EMAIL_ADDRESS&gt;
</pre></div>
</div>
<p>which will be reflected into .gitconfig file under home directory.</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[user]</span>
        <span class="na">name</span> <span class="o">=</span> <span class="s">&lt;USERNAME&gt;</span>
<span class="s">        email = &lt;YOUR_EMAIL_ADDRESS&gt;</span>
</pre></div>
</div>
<p>Enable password cache so as to avoid repetition of password input.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git config --global credential.helper cache
<span class="nv">$ </span>git config --global credential.helper <span class="s1">'cache --timeout=3600'</span>
</pre></div>
</div>
<p>These configurations will be reflected int .gitconfig file as well.
Or you can write it by hand. (maybe)</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[credential]</span>
        <span class="na">helper</span> <span class="o">=</span> <span class="s">cache --timeout=3600</span>
</pre></div>
</div>
</div>
<div class="section" id="tinkerer-configuration">
<h2>tinkerer configuration</h2>
<p>You can install tinkerer with pip command.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo pip install tinkerer
</pre></div>
</div>
<p>This command execution will install dependent modules like sphinx if not there.
The installed version (on ubuntu 13.04) is as follows:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>tinker -v
Tinkerer version 1.2.1
</pre></div>
</div>
<p>Create local directory to host blog.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>mkdir blog
</pre></div>
</div>
<p>Execute tinker command (not tinkerer) with setup option.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>tinker --setup
Your new blog is almost ready!
You just need to edit a couple of lines in conf.py
<span class="nv">$ </span>tree .
    .
    ├── _static
    ├── _templates
    │   ├── page.rst
    │   └── post.rst
    ├── conf.py
    ├── drafts
    ├── index.html
    └── master.rst
</pre></div>
</div>
<p>Configure configuration file, conf.py (same as sphinx’s one) according to your appetite.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>diff conf.py.org conf.py
11c11
&lt; <span class="nv">project</span> <span class="o">=</span> <span class="s1">'My blog'</span>
---
&gt; <span class="nv">project</span> <span class="o">=</span> <span class="s2">&quot;sakana&quot;</span>
14c14
&lt; <span class="nv">tagline</span> <span class="o">=</span> <span class="s1">'Add intelligent tagline here'</span>
---
&gt; <span class="nv">tagline</span> <span class="o">=</span> <span class="s1">'short memo by SkyHigh71'</span>
20c20
&lt; <span class="nv">author</span> <span class="o">=</span> <span class="s1">'Winston Smith'</span>
---
&gt; <span class="nv">author</span> <span class="o">=</span> <span class="s1">'SkyHigh71'</span>
23c23
&lt; <span class="nv">copyright</span> <span class="o">=</span> <span class="s1">'1984, '</span> + author
---
&gt; <span class="nv">copyright</span> <span class="o">=</span> <span class="s1">'2013-, '</span> + author
26c26
&lt; <span class="nv">website</span> <span class="o">=</span> <span class="s1">'http://127.0.0.1/blog/html/'</span>
---
&gt; <span class="nv">website</span> <span class="o">=</span> <span class="s1">'http://skyhigh71.github.com'</span>
</pre></div>
</div>
<p>That’s all you have to configure upon initial configuration on local side.
And you can modify parameter(s) later on.</p>
<p>Create a new repository named &lt;account.github.io&gt;, e.g.) SkyHigh71.github.io on github.</p>
<p>On the other hand, create local directory to host HTML files for publication.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>mkdir publish
<span class="nv">$ </span><span class="nb">cd </span>publish
<span class="nv">$ </span>git init
<span class="nv">$ </span>git remote add origin https://github.com/SkyHigh71/SkyHigh71.github.io.git
</pre></div>
</div>
<p>github URL will be reflected in config file under .git directory.</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[remote &quot;origin&quot;]</span>
        <span class="na">url</span> <span class="o">=</span> <span class="s">https://github.com/SkyHigh71/SkyHigh71.github.io.git</span>
</pre></div>
</div>
<p>Disable jekyll.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>touch .nojekyll
</pre></div>
</div>
</div>
<div class="section" id="write-up-a-post-and-publish-it">
<h2>write up a post and publish it</h2>
<p>tinker command will create a RST file under YYYY/MM/DD directory:</p>
<p>Start preparation for post frst as draft.
This will create rst file under draft directory.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>tinker -d <span class="s2">&quot;the First Post of mine&quot;</span>
<span class="nv">$ </span>ls drafts
the_first_post_of_mine.rst
</pre></div>
</div>
<p>After having finished editing your post and you are ready to post it, then it’s time to post.
Following command will move RST file from draft directory to YYYY/MM/DD directory and be reflected in master.rst file.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>tinker -p drafts/the_first_post_of_mine.rst
</pre></div>
</div>
<p>And build it to yield html file. Or you can revert back to draft if you find something needs to be modified.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ LANG</span><span class="o">=</span>C tinker -b
</pre></div>
</div>
<p>This will create HTML files under blog/html directory.</p>
<p>Copy files to publish directory and commit it.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd </span>publish
<span class="nv">$ </span>rsync -av ../blog/html/ .

<span class="nv">$ </span>git add .
<span class="nv">$ </span>git commit -m <span class="s2">&quot;first post&quot;</span>
</pre></div>
</div>
<p>Finally publish post to github.
By the way, please be noted that you need to select not gh-pages branch but master branch for user’s blog.
(It seems that there is a confusion about which branch to choose)</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git push origin master
</pre></div>
</div>
<p>Please be patient, as it takes several minutes until posted page will come up.
After a while, you can access your blog with URL of <a class="reference external" href="http:">http:/</a>/&lt;account&gt;.github.io/.</p>
</div>
</div>]]></description>
             <pubDate>Sun, 11 Aug 2013 00:00:00 +0900</pubDate>
        </item>
    
        <item>
            <link>http://skyhigh71.github.io/2013/08/11/hello_world.html</link>
            <guid>http://skyhigh71.github.io/2013/08/11/hello_world.html</guid>
            <title><![CDATA[Hello World]]></title>
            <description><![CDATA[<div class="section" id="hello-world">
<h1>Hello World</h1>
<p>How are you doing?</p>
</div>]]></description>
             <pubDate>Sun, 11 Aug 2013 00:00:00 +0900</pubDate>
        </item>
    
    </channel>
</rss>